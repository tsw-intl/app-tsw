"use strict";(self.webpackChunktswgestion=self.webpackChunktswgestion||[]).push([[562],{7562:(Zo,U,m)=>{m.r(U),m.d(U,{StockModule:()=>vo,createTranslateLoader:()=>N});var u=m(6895),g=m(3053),t=m(4650),c=m(1364),h=m(7185),b=m(5644);let Q=(()=>{class i{constructor(e,o,s){this.translateService=e,this.toastrService=o,this.stockService=s,this.keyLanguage="userLanguage",this.translateService.use(localStorage.getItem(this.keyLanguage))}ngOnInit(){}getalertStock(){this.stockService.getAllStockPays().subscribe({next:e=>{for(let o=0;o<e.length;o++)e[o].quantity==e[o].qtyalerte&&this.toastrService.error(`le produit  ${e[o].productId.name} a atteint sa quantit\xe9 alerte merci de penser \xe0 passer une nouvelle commande`)}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.sK),t.Y36(h._W),t.Y36(b.q))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-stock"]],decls:106,vars:27,consts:[[1,"container-fluid"],[1,"d-sm-flex","align-items-center","justify-content-between","mb-4"],[1,"h3","mb-0","text-gray-800"],[1,"row"],[1,"col-xl-4","col-md-4","mb-4"],[1,"card","border-left-primary","border-bottom-primary","shadow","h-100","py-2"],["routerLink","/stock/entree-stock",1,"btn"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-primary","text-uppercase","mb-1"],[1,"col-auto"],[1,"fas","fa-calendar","fa-2x","text-gray-300"],[1,"card","border-left-success","shadow","h-100","py-2"],["routerLink","/stock/mouvement",1,"btn"],[1,"text-xs","font-weight-bold","text-success","text-uppercase","mb-1"],[1,"fas","fa-dollar-sign","fa-2x","text-gray-300"],[1,"card","border-left-info","shadow","h-100","py-2"],["routerLink","/stock/product",1,"btn"],[1,"text-xs","font-weight-bold","text-info","text-uppercase","mb-1"],[1,"fas","fa-clipboard-list","fa-2x","text-gray-300"],[1,"card","border-left-dark","border-bottom-dark","shadow","h-100","py-2"],["routerLink","/stock/national-stock",1,"btn"],[1,"text-xs","font-weight-bold","text-dark","text-uppercase","mb-1"],[1,"fas","fa-cubes","fa-2x","text-gray-300"],[1,"card","border-left-danger","border-bottom-danger","shadow","h-100","py-2"],["routerLink","/stock/international-stock",1,"btn"],[1,"text-xs","font-weight-bold","text-danger","text-uppercase","mb-1"],["routerLink","/stock/stock-alert",1,"btn"],["routerLink","/stock/mouvement-pays-entrepot",1,"btn"],["routerLink","/stock/bureau-consignation",1,"btn"],["routerLink","/stock/produits-endommages",1,"btn"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"a",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10),t._uU(13),t.ALo(14,"translate"),t.qZA()(),t.TgZ(15,"div",11),t._UZ(16,"i",12),t.qZA()()()()()(),t.TgZ(17,"div",4)(18,"div",13)(19,"a",14)(20,"div",7)(21,"div",8)(22,"div",9)(23,"div",15),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",11),t._UZ(27,"i",16),t.qZA()()()()()(),t.TgZ(28,"div",4)(29,"div",17)(30,"a",18)(31,"div",7)(32,"div",8)(33,"div",9)(34,"div",19),t._uU(35),t.ALo(36,"translate"),t.qZA()(),t.TgZ(37,"div",11),t._UZ(38,"i",20),t.qZA()()()()()()(),t.TgZ(39,"div",3)(40,"div",4)(41,"div",21)(42,"a",22)(43,"div",7)(44,"div",8)(45,"div",9)(46,"div",23),t._uU(47),t.ALo(48,"translate"),t.qZA()(),t.TgZ(49,"div",11),t._UZ(50,"i",24),t.qZA()()()()()(),t.TgZ(51,"div",4)(52,"div",25)(53,"a",26)(54,"div",7)(55,"div",8)(56,"div",9)(57,"div",27),t._uU(58),t.ALo(59,"translate"),t.qZA()(),t.TgZ(60,"div",11),t._UZ(61,"i",24),t.qZA()()()()()(),t.TgZ(62,"div",4)(63,"div",5)(64,"a",28)(65,"div",7)(66,"div",8)(67,"div",9)(68,"div",10),t._uU(69),t.ALo(70,"translate"),t.qZA()(),t.TgZ(71,"div",11),t._UZ(72,"i",12),t.qZA()()()()()()(),t.TgZ(73,"div",3)(74,"div",4)(75,"div",25)(76,"a",29)(77,"div",7)(78,"div",8)(79,"div",9)(80,"div",27),t._uU(81),t.ALo(82,"translate"),t.qZA()(),t.TgZ(83,"div",11),t._UZ(84,"i",24),t.qZA()()()()()(),t.TgZ(85,"div",4)(86,"div",25)(87,"a",30)(88,"div",7)(89,"div",8)(90,"div",9)(91,"div",27),t._uU(92),t.ALo(93,"translate"),t.qZA()(),t.TgZ(94,"div",11),t._UZ(95,"i",24),t.qZA()()()()()(),t.TgZ(96,"div",4)(97,"div",25)(98,"a",31)(99,"div",7)(100,"div",8)(101,"div",9)(102,"div",27),t._uU(103," Produits endommag\xe9s"),t.qZA()(),t.TgZ(104,"div",11),t._UZ(105,"i",24),t.qZA()()()()()()()()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,9,"GestionProduits")),t.xp6(10),t.hij(" ",t.lcZ(14,11,"GestionEntreesenStock"),""),t.xp6(11),t.hij(" ",t.lcZ(25,13,"GestionMouvementsStocks"),""),t.xp6(11),t.hij("",t.lcZ(36,15,"GestionProduits")," "),t.xp6(12),t.hij(" ",t.lcZ(48,17,"StockDispo"),""),t.xp6(11),t.hij(" ",t.lcZ(59,19,"StockDispoInter"),""),t.xp6(11),t.hij(" ",t.lcZ(70,21,"GestionStockAlertePays"),""),t.xp6(12),t.hij(" ",t.lcZ(82,23,"produitpaysversentrepot"),""),t.xp6(11),t.hij(" ",t.lcZ(93,25,"voirLesconsignation"),""))},dependencies:[g.rH,c.X$]}),i})();var r=m(4006),S=m(7579),v=m(529),f=m(3862),A=m(5415);const J=function(i){return["/stock/edit-product",i]};function E(i,n){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"div")(9,"a",41),t._UZ(10,"i",42),t.qZA()(),t._UZ(11,"div"),t.qZA()()),2&i){const e=n.$implicit;t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.price," "),t.xp6(2),t.hij(" ",e.disponibilite," "),t.xp6(3),t.Q6J("routerLink",t.VKq(4,J,e._id))}}function Y(i,n){1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Sauver")))}function M(i,n){1&i&&t._UZ(0,"span",43)}function j(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"nomProduitObligatoire")))}function V(i,n){if(1&i&&(t.TgZ(0,"div",44),t.YNc(1,j,3,3,"div",22),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.name.errors.required)}}function B(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"PrixObligatoire")))}function K(i,n){if(1&i&&(t.TgZ(0,"div",44),t.YNc(1,B,3,3,"div",22),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.price.errors.required)}}const F=function(i){return{"is-invalid":i}};let G=(()=>{class i{constructor(e,o,s,a,l){this.fb=e,this.http=o,this.productService=s,this.toastrService=a,this.translateService=l,this.submitted=!1,this.listProducts=[],this.pageNumber=1,this.nom="",this.loading=!0,this.buttonloading=!1,this.condit="Oui",this.myDate=new Date,this.dtoptions={},this.dtTrigger=new S.x,this.keyLanguage="userLanguage",this.productForm=new r.cw({name:new r.NI(""),price:new r.NI(""),disponibilite:new r.NI("")}),this.translateService.use(localStorage.getItem(this.keyLanguage))}ngOnInit(){this.dtoptions={pagingType:"full_numbers",searching:!0,paging:!0,lengthChange:!0,language:{searchPlaceholder:""}},this.getAllProducts()}get f(){return this.productForm.controls}onSubmit(){this.submitted=!0,this.productForm.invalid||(this.buttonloading=!0,this.productForm.value.disponibilite=1==this.productForm.value.disponibilite?"Oui":"Non",console.log(this.productForm.value),this.productService.registerProduct({name:this.productForm.value.name,price:this.productForm.value.price,disponibilite:this.productForm.value.disponibilite}).subscribe({next:s=>{console.log(s),this.toastrService.success(`Le bien ${s.name} a bien \xe9t\xe9 ajout\xe9 \xe0 la base de donn\xe9es !`),this.buttonloading=!1},error:s=>{console.log(s),this.toastrService.error(s.error.message),this.buttonloading=!1}}))}getAllProducts(){this.productService.getAllProducts().subscribe({next:e=>{this.listProducts=e,console.log(this.listProducts[2]),this.totalProducts=e.length,this.dtTrigger.next(null),this.loading=!1},error:e=>{console.log(e),this.loading=!1}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.qu),t.Y36(v.eN),t.Y36(f.M),t.Y36(h._W),t.Y36(c.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-product"]],decls:85,vars:48,consts:[[1,"container-fluid"],[1,"h3","mb-2","text-gray-800"],[1,"card","shadow","mb-4"],[1,"card-header","py-3"],[1,"m-0","font-weight-bold","text-primary"],["data-bs-toggle","modal","data-bs-target","#addProductModal",1,"btn","btn-primary"],[1,"fa","fa-plus"],[1,"card-body"],[1,"table-responsive"],["datatable","",1,"row-border","hover","table","table-bordered",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],["id","addProductModal","tabindex","-1","aria-labelledby","addProductModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","addProductModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-danger"],[1,"container"],[1,"col-lg-12","md-12"],[1,"col-md-3"],[1,"form-group"],[1,"mb-3"],["for","product"],[2,"color","red"],["type","text","placeholder","Oroki","id","product","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","mb-3"],["for","price"],["type","number","placeholder","15000","id","price","formControlName","price",1,"form-control",3,"ngClass"],[1,"col-md-4"],[1,"form-check","form-switch"],["type","checkbox","id","flexSwitchCheckChecked","formControlName","disponibilite",1,"form-check-input"],["for","flexSwitchCheckChecked",1,"form-check-label"],[1,"btn","btn-success",3,"routerLink"],[1,"fa","fa-pencil"],[1,"spinner-border","spinner-border-sm"],[1,"invalid-feedback"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"h6",4)(7,"button",5),t._UZ(8,"i",6),t._uU(9),t.ALo(10,"translate"),t.qZA()()(),t.TgZ(11,"div",7)(12,"div",8)(13,"table",9)(14,"thead")(15,"tr")(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"th"),t._uU(26),t.ALo(27,"translate"),t.qZA()()(),t.TgZ(28,"tbody"),t.YNc(29,E,12,6,"tr",10),t.qZA()()()()()(),t.TgZ(30,"div",11)(31,"div",12)(32,"div",13)(33,"div",14)(34,"h3",15),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"button",16),t.qZA(),t.TgZ(38,"div",17)(39,"div",18)(40,"div",19)(41,"form",20),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(42,"button",21),t.YNc(43,Y,3,3,"ng-container",22),t.YNc(44,M,1,0,"span",23),t.qZA(),t._uU(45," \xa0 "),t.TgZ(46,"button",24),t._uU(47),t.ALo(48,"translate"),t.qZA(),t._UZ(49,"br"),t.TgZ(50,"div",25)(51,"div",18)(52,"div",26),t._UZ(53,"br"),t.TgZ(54,"div",18)(55,"div",27)(56,"div",28)(57,"div",29)(58,"div",19)(59,"label",30),t._uU(60),t.ALo(61,"translate"),t.TgZ(62,"span",31),t._uU(63,"*"),t.qZA()()(),t.TgZ(64,"div",19),t._UZ(65,"input",32),t.YNc(66,V,2,1,"div",33),t.qZA()()()(),t.TgZ(67,"div",27)(68,"div",34)(69,"div",19)(70,"label",35),t._uU(71),t.ALo(72,"translate"),t.TgZ(73,"span",31),t._uU(74,"*"),t.qZA()()(),t.TgZ(75,"div",19),t._UZ(76,"input",36),t.YNc(77,K,2,1,"div",33),t.qZA()()()()(),t.TgZ(78,"div",37)(79,"div",38),t._UZ(80,"input",39),t.TgZ(81,"label",40),t._uU(82),t.ALo(83,"translate"),t.qZA()()()(),t._UZ(84,"br"),t.qZA()()()()()()()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,22,"GestionProduits")),t.xp6(7),t.hij("\xa0",t.lcZ(10,24,"AjouterProduit")," "),t.xp6(4),t.Q6J("dtOptions",o.dtoptions)("dtTrigger",o.dtTrigger),t.xp6(4),t.Oqu(t.lcZ(18,26,"Libelle")),t.xp6(3),t.Oqu(t.lcZ(21,28,"Prix")),t.xp6(3),t.Oqu(t.lcZ(24,30,"Satut")),t.xp6(3),t.Oqu(t.lcZ(27,32,"Action")),t.xp6(3),t.Q6J("ngForOf",o.listProducts),t.xp6(6),t.Oqu(t.lcZ(36,34,"AjouterProduit")),t.xp6(6),t.Q6J("formGroup",o.productForm),t.xp6(1),t.Q6J("disabled",o.buttonloading),t.xp6(1),t.Q6J("ngIf",!o.buttonloading),t.xp6(1),t.Q6J("ngIf",o.buttonloading),t.xp6(3),t.Oqu(t.lcZ(48,36,"Annuler")),t.xp6(13),t.hij(" ",t.lcZ(61,38,"NomProduit"),""),t.xp6(5),t.Q6J("ngClass",t.VKq(44,F,o.submitted&&o.f.name.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.name.errors),t.xp6(5),t.hij("",t.lcZ(72,40,"CoutUnitaire")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(46,F,o.submitted&&o.f.price.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.price.errors),t.xp6(5),t.Oqu(t.lcZ(83,42,"Disponibilite")))},dependencies:[u.mk,u.sg,u.O5,g.rH,r._Y,r.Fj,r.wV,r.Wl,r.JJ,r.JL,r.sg,r.u,A.G,c.X$]}),i})();var Z=m(5861);class P{constructor(){this.products=new Array}updateFrom(n){this.products=n.products}}var D=m(6166),$=m(2983),y=m.n($),x=m(4508),T=m(3056);function R(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div"),t._uU(3),t.qZA()(),t.TgZ(4,"td",11),t._uU(5),t.qZA(),t.TgZ(6,"td",11),t._uU(7),t.qZA(),t.TgZ(8,"td",11),t._uU(9),t.qZA(),t.TgZ(10,"td",11)(11,"a",46),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.onDeleteMvtStock(a._id))}),t._UZ(12,"i",47),t.qZA()()()}if(2&i){const e=n.$implicit;t.xp6(3),t.Oqu(e.date_sortie),t.xp6(2),t.hij(" ",e.productId.name," "),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",e.bureauId.bureau_name," ")}}function X(i,n){1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Sauver")))}function H(i,n){1&i&&t._UZ(0,"span",48)}function W(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BureauObligatoire")))}function z(i,n){if(1&i&&(t.TgZ(0,"div",49),t.YNc(1,W,3,3,"div",24),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.bureauId.errors.required)}}function tt(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DateSortieObligatoire")))}function et(i,n){if(1&i&&(t.TgZ(0,"div",49),t.YNc(1,tt,3,3,"div",24),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.date_sortie.errors.required)}}function ot(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",50)(1,"div",51),t.NdJ("click",function(){const s=t.CHM(e),a=s.index,l=s.$implicit,d=t.oxw();return t.KtG(d.selectItem(a,l.productId._id))}),t.TgZ(2,"div",8)(3,"div",52)(4,"div",53)(5,"div",54),t._uU(6),t.qZA()()()()()()}if(2&i){const e=n.$implicit;t.xp6(6),t.hij(" ",e.productId.name,"")}}function it(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",55)(1,"div",20)(2,"div",56)(3,"h5",57),t._uU(4),t.qZA(),t._UZ(5,"br")(6,"p"),t.qZA(),t.TgZ(7,"div",32)(8,"div",58)(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"input",59),t.NdJ("input",function(s){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.onSearchChange(l,s))}),t.qZA()()()()()}if(2&i){const e=n.$implicit;t.xp6(4),t.Oqu(e.productId.name),t.xp6(6),t.Oqu(t.lcZ(11,3,"Quantite")),t.xp6(2),t.Q6J("max",e.quantity)}}const nt=function(){return["/stock/retour-product"]},rt=function(i){return{"is-invalid":i}};let st=(()=>{class i{constructor(e,o,s,a,l,d){this.fb=e,this.toastrService=o,this.agenceService=s,this.productService=a,this.stockService=l,this.translateService=d,this.listBureau=[],this.listProducts=[],this.listMouvementStock=[],this.mouvementStock=[],this.submitted=!1,this.loading=!0,this.buttonloading=!1,this.disabled=!1,this.limitSelection=!1,this.limitShow=!1,this.ShowFilter=!0,this.showAll=!0,this.dropdownSettings={},this.Settings={},this.dtoptions={},this.dtTrigger=new S.x,this.subscribers=new Array,this.keysList=[],this.itemList=[],this.sale=new P,this.templist=[],this.productList=[],this.selectproductList=[],this.salePrdoucts=[],this.SALE_KEY="sale",this.keyLanguage="userLanguage",this.selectedItem=[],this.totalPrice=0,this.subTotal=0,this.vat=0,this.translateService.use(localStorage.getItem(this.keyLanguage)),this.mvmtstockForm=this.fb.group({bureauId:["",r.kI.required],date_sortie:["",r.kI.required]})}ngOnInit(){this.getAllBureau(),this.getallMvmtStock(),this.dropdownSettings={singleSelection:!0,defaultOpen:!1,idField:"_id",textField:"bureau_name",tooltipField:"item_tooltip",enableCheckAll:this.showAll,itemsShowLimit:999999,allowSearchFilter:this.ShowFilter},this.dtoptions={pagingType:"full_numbers",searching:!0,paging:!0,lengthChange:!0,language:{searchPlaceholder:""}}}get f(){return this.mvmtstockForm.controls}onSubmit(){var e=this;return(0,Z.Z)(function*(){if(e.submitted=!0,e.mvmtstockForm?.invalid)return;const o=e.itemList.reduce((d,p)=>{const _=d.find(w=>w.productId===p.productId);if(_){const w=_.name.filter(I=>I===p.name);return _.quantity.filter(I=>I===p.quantity).length||w.length||(_.name.push(p.name),_.quantity.push(p.quantity)),d}return d.concat([{productId:p.productId,name:[p.name],quantity:[p.quantity]}])},[]);console.log(o);let s=[],a=[];for(let d=0;d<o.length;d++)s.push({name:o[d].name[0],quantity:o[d].quantity[0],productId:o[d].productId}),a.push({name:o[d].name[0],quantity:o[d].quantity[0]});const l={bureauId:e.mvmtstockForm.value.bureauId[0]._id,date_sortie:e.mvmtstockForm.value.date_sortie,items:s};console.log("formData",l),e.stockService.registerMvtStock(l).subscribe({next:d=>{e.bureaucurrent=e.mvmtstockForm.value.bureauId[0].bureau_name,e.datemvt=e.mvmtstockForm.value.date_sortie;for(let p=0;p<a.length;p++)e.mouvementStock.push([a[p].name,a[p].quantity]);e.toastrService.success("Enregistrement effectu\xe9 avec succ\xe8s!"),e.loading=!1,e.downloadpayroll(e.mouvementStock),window.location.reload()},error:d=>{console.log("erreur",d),e.toastrService.error(d.statusText),e.loading=!1}})})()}getAllBureau(){var e=this;return(0,Z.Z)(function*(){e.agenceService.getAllBureauxForMvt().subscribe({next:o=>{e.listBureau=o,console.log(e.listBureau),e.loading=!1},error:o=>{console.log("erreur",o),e.toastrService.error(o.statusText),e.loading=!1}})})()}getallMvmtStock(){this.stockService.getAllMvtStock().subscribe({next:e=>{this.listMouvementStock=e,this.dtTrigger.next(null),console.log(this.listMouvementStock),this.loading=!1},error:e=>{console.log(e),this.toastrService.error(e.statusText),this.loading=!1}})}getAllProducts(e){this.stockService.getAllStockByPays(e).subscribe({next:o=>{this.listProducts=o,console.log(this.listProducts),this.loading=!1},error:o=>{console.log(o),this.toastrService.error(o.statusText),this.loading=!1}})}onItemSelect(e){this.agenceService.singleBureau(e._id).subscribe({next:o=>{this.bureau=o.findagence,this.getAllProducts(this.bureau.countryId._id),this.loading=!1},error:o=>{console.log(o),this.toastrService.error(o.statusText),this.loading=!1}})}onItemDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.mvmtstockForm.value)}onDropDownClose(){console.log("dropdown closed")}toogleShowAll(){this.showAll=!this.showAll,this.dropdownSettings=Object.assign({},this.dropdownSettings,{enableCheckAll:this.showAll})}toogleShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownSettings=Object.assign({},this.dropdownSettings,{allowSearchFilter:this.ShowFilter})}selectItem(e,o){return-1==this.keysList.indexOf(o)?(this.selectproductList.push(this.listProducts[e]),this.keysList.push(o),console.log(this.selectproductList),console.log(this.keysList),this.selectproductList):(alert("duplicate Product"),this.selectproductList)}quantity(e,o){console.log("target",Number(e));let s=0;for(let a=0;a<this.selectproductList.length;a++)s+=this.selectproductList[a].price*this.tempprice[a].qty;this.subTotal=s,this.vat=.1*this.subTotal,this.totalPrice=this.subTotal+this.vat}setTempPrice(){let e;if(null==this.tempprice){this.tempprice=[];for(let o=0;o<this.selectproductList.length;o++)e={id:o,qty:1},this.tempprice.push(e)}else e={id:this.tempprice.length-1,qty:1},this.tempprice.push(e)}delete(e,o){this.subTotal=this.subTotal-this.tempprice[e].qty*this.selectproductList[e].price,this.vat=.1*this.subTotal,this.totalPrice=this.subTotal+this.vat,this.selectproductList.splice(e,1),this.tempprice.splice(e,1),this.keysList.splice(e,1)}onSearchChange(e,o){const a={productId:e.productId._id,name:e.productId.name,quantity:Number(o.target.value)};this.itemList.push(a);const l=this.itemList.findIndex(d=>d.productId==e.productId._id);console.log("Before update: ",this.itemList[l]),this.itemList[l].quantity=Number(o.target.value),console.log("After update: ",this.itemList[l]),console.log("itemList==> ",this.itemList)}onDeleteMvtStock(e){window.confirm(`\xcates-vous s\xfbr de vouloir supprimer ${e} ?`)&&this.stockService.deletemvtStock(e).subscribe({next:o=>{console.log(o),this.toastrService.success(o),window.location.reload()},error:o=>{console.log(o),this.toastrService.error(o.error.message),this.buttonloading=!1}})}downloadpayroll(e){const o=new D.default;var s=new Image;return s.src="assets/logotsw.png",o.addImage(s.src,30,20,10,10),y()(o,{body:[[{content:"\n",styles:{halign:"left"}}]],theme:"plain"}),y()(o,{body:[[{content:"TOTAL SUCCESS WORLD-TSW\nMarcory Cit\xe9 Hibiscus Villa 189\nBP 3450 Abidjan 10\nT\xe9l: 2721261411/0554543098\nSite web: www.tswintl.com",styles:{halign:"left"}},{content:`Bureau:${this.bureaucurrent}\n\n\n`,styles:{halign:"right"}}]],theme:"plain"}),y()(o,{body:[[{content:`BORDEREAU DE SORTIE DU Date ${this.datemvt}`,styles:{halign:"center",fontSize:13,fillColor:"#334CFF",textColor:"#FFFFFF"}}]],theme:"plain"}),y()(o,{head:[["PRODUIT/PRODUCT","QUANTITE/QUANTITY"]],body:e,theme:"plain",styles:{halign:"center"},headStyles:{fillColor:"#334CFF",textColor:"#FFFFFF"},alternateRowStyles:{fillColor:[231,215,252]},tableLineColor:"#334CFF",tableLineWidth:.1}),y()(o,{body:[[{content:`Signature du comptable\n\n\n\n\n\nfait le: ${this.datemvt}`,styles:{halign:"left"}},{content:"Signature des managers\n\n\n\n\n",styles:{halign:"right"}}]],theme:"plain"}),o.save("bordereau de sortie.pdf")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.qu),t.Y36(h._W),t.Y36(x.q),t.Y36(f.M),t.Y36(b.q),t.Y36(c.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-mouvement-stock"]],decls:96,vars:55,consts:[[1,"container-fluid"],[1,"h3","mb-2","text-gray-800"],[1,"card","shadow","mb-4"],[1,"card-header","py-3"],[1,"m-0","font-weight-bold","text-primary"],["data-bs-toggle","modal","data-bs-target","#addSortieStockModal",1,"btn","btn-primary"],[1,"fa","fa-plus"],[1,"btn","btn-primary",3,"routerLink"],[1,"card-body"],[1,"table-responsive"],["datatable","",1,"row-border","hover","table","table-bordered",3,"dtOptions","dtTrigger"],[1,"text-center"],[4,"ngFor","ngForOf"],["id","addSortieStockModal","tabindex","-1","aria-labelledby","addSortieStockModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","addSortieStockModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-danger"],[1,"container"],[1,"card"],[1,"col-lg-6","col-md-6"],[1,"form-group"],[1,"mb-3"],[1,"col-md-3"],["for","bureau"],[2,"color","red"],[1,"col-md-9"],["formControlName","bureauId",3,"data","disabled","settings","onDropDownClose","onSelect","onDeSelect"],["class","invalid-feedback",4,"ngIf"],["for","date_sortie"],["type","date","id","date_sortie","formControlName","date_sortie",1,"form-control",3,"ngClass"],[1,"col-lg-6"],["class","col-xl-3 col-md-3 mb-3",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"card","item-list"],[1,"text-center","pt-3","pb-2"],["class","selectitem mt-2 pt-1",4,"ngFor","ngForOf"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"spinner-border","spinner-border-sm"],[1,"invalid-feedback"],[1,"col-xl-3","col-md-3","mb-3"],[1,"card","border-left-primary","border-bottom-primary","shadow","h-100","py-2",2,"cursor","pointer",3,"click"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-primary","text-center","text-uppercase","mb-1"],[1,"selectitem","mt-2","pt-1"],[1,"col-md-5"],[1,"title"],[1,"form-group","qty"],["type","number","min","0",1,"form-control",3,"max","input"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"h6",4)(7,"button",5),t._UZ(8,"i",6),t._uU(9),t.ALo(10,"translate"),t.qZA(),t._uU(11,"\xa0 "),t.TgZ(12,"a",7),t._UZ(13,"i",6),t._uU(14),t.ALo(15,"translate"),t.qZA()()(),t.TgZ(16,"div",8)(17,"div",9)(18,"table",10)(19,"thead")(20,"tr")(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th",11),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"th"),t._uU(34),t.ALo(35,"translate"),t.qZA()()(),t.TgZ(36,"tbody"),t.YNc(37,R,13,4,"tr",12),t.qZA()()()()()(),t.TgZ(38,"div",13)(39,"div",14)(40,"div",15)(41,"div",16)(42,"h3",17),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"button",18),t.qZA(),t.TgZ(46,"div",19)(47,"div",20)(48,"div",21)(49,"form",22),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(50,"button",23),t.YNc(51,X,3,3,"ng-container",24),t.YNc(52,H,1,0,"span",25),t.qZA(),t._uU(53,"\xa0 "),t.TgZ(54,"button",26),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"br"),t.TgZ(58,"div",27)(59,"div",28)(60,"div",20)(61,"div",29)(62,"div",30)(63,"div",31)(64,"div",32)(65,"label",33),t._uU(66),t.ALo(67,"translate"),t.TgZ(68,"span",34),t._uU(69,"*"),t.qZA()()(),t.TgZ(70,"div",35)(71,"ng-multiselect-dropdown",36),t.NdJ("onDropDownClose",function(){return o.onDropDownClose()})("onSelect",function(a){return o.onItemSelect(a)})("onDeSelect",function(a){return o.onItemDeSelect(a)}),t.qZA(),t.YNc(72,z,2,1,"div",37),t.qZA()()()(),t.TgZ(73,"div",29)(74,"div",30)(75,"div",31)(76,"div",32)(77,"label",38),t._uU(78),t.ALo(79,"translate"),t.TgZ(80,"span",34),t._uU(81,"*"),t.qZA()()(),t.TgZ(82,"div",35),t._UZ(83,"input",39),t.YNc(84,et,2,1,"div",37),t.qZA()()()()()()()()()(),t.TgZ(85,"div",27)(86,"div",20)(87,"div",40)(88,"div",20),t.YNc(89,ot,7,1,"div",41),t.qZA()(),t.TgZ(90,"div",42)(91,"div",43)(92,"h3",44),t._uU(93,"Your Bucket"),t.qZA(),t.TgZ(94,"div",8),t.YNc(95,it,13,5,"div",45),t.qZA()()()()()()()()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,28,"GestionProduits")),t.xp6(7),t.hij("\xa0",t.lcZ(10,30,"NouvelleSortieDeStock")," "),t.xp6(3),t.Q6J("routerLink",t.DdM(52,nt)),t.xp6(2),t.hij("\xa0",t.lcZ(15,32,"retoutDeStock")," "),t.xp6(4),t.Q6J("dtOptions",o.dtoptions)("dtTrigger",o.dtTrigger),t.xp6(4),t.Oqu(t.lcZ(23,34,"DateSortie")),t.xp6(3),t.Oqu(t.lcZ(26,36,"Produit")),t.xp6(3),t.Oqu(t.lcZ(29,38,"Quantite")),t.xp6(3),t.Oqu(t.lcZ(32,40,"Bureaudedestination")),t.xp6(3),t.Oqu(t.lcZ(35,42,"Action")),t.xp6(3),t.Q6J("ngForOf",o.listMouvementStock),t.xp6(6),t.Oqu(t.lcZ(44,44,"AjouterBordereauSortie")),t.xp6(6),t.Q6J("formGroup",o.mvmtstockForm),t.xp6(1),t.Q6J("disabled",o.buttonloading),t.xp6(1),t.Q6J("ngIf",!o.buttonloading),t.xp6(1),t.Q6J("ngIf",o.buttonloading),t.xp6(3),t.Oqu(t.lcZ(56,46,"Annuler")),t.xp6(11),t.Oqu(t.lcZ(67,48,"Bureau")),t.xp6(5),t.Q6J("data",o.listBureau)("disabled",o.disabled)("settings",o.dropdownSettings),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.bureauId.errors),t.xp6(6),t.Oqu(t.lcZ(79,50,"DateSortie")),t.xp6(5),t.Q6J("ngClass",t.VKq(53,rt,o.submitted&&o.f.date_sortie.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.date_sortie.errors),t.xp6(5),t.Q6J("ngForOf",o.listProducts),t.xp6(6),t.Q6J("ngForOf",o.selectproductList))},dependencies:[T.OP,u.mk,u.sg,u.O5,g.rH,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,A.G,c.X$]}),i})();var q=m(7729);function at(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div"),t._uU(3),t.ALo(4,"date"),t.qZA()(),t.TgZ(5,"td")(6,"div"),t._uU(7),t.qZA()(),t.TgZ(8,"td",10),t._uU(9),t.qZA(),t.TgZ(10,"td",10),t._uU(11),t.qZA(),t.TgZ(12,"td",10),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"td",10),t._uU(16),t.ALo(17,"date"),t.qZA(),t.TgZ(18,"td",10)(19,"a",49),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.onDeleteStockEnter(a._id))}),t._UZ(20,"i",50),t.qZA()()()}if(2&i){const e=n.$implicit;t.xp6(3),t.Oqu(t.xi3(4,6,e.enterDate,"dd MMMM yyyy")),t.xp6(4),t.Oqu(e.paysId.country_name),t.xp6(2),t.hij(" ",e.productId.name," "),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",t.xi3(14,9,e.fabDate,"dd MMMM yyyy")," "),t.xp6(3),t.hij(" ",t.xi3(17,12,e.expirDate,"dd MMMM yyyy")," ")}}function lt(i,n){1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Sauver")))}function dt(i,n){1&i&&t._UZ(0,"span",51)}function ut(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function ct(i,n){if(1&i&&(t.TgZ(0,"div",52),t.YNc(1,ut,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.quantity.errors.required)}}function pt(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function gt(i,n){if(1&i&&(t.TgZ(0,"div",52),t.YNc(1,pt,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.enterDate.errors.required)}}function mt(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function ht(i,n){if(1&i&&(t.TgZ(0,"div",52),t.YNc(1,mt,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.fabDate.errors.required)}}function _t(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function bt(i,n){if(1&i&&(t.TgZ(0,"div",52),t.YNc(1,_t,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.expirDate.errors.required)}}function vt(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function ft(i,n){if(1&i&&(t.TgZ(0,"div",52),t.YNc(1,vt,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.alertDate.errors.required)}}function Zt(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function St(i,n){if(1&i&&(t.TgZ(0,"div",52),t.YNc(1,Zt,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.alertQty.errors.required)}}const C=function(i){return{"is-invalid":i}};let At=(()=>{class i{constructor(e,o,s,a,l,d,p,_){this.countryService=e,this.productService=o,this.stockService=s,this.fb=a,this.http=l,this.toastrService=d,this.translateService=p,this.router=_,this.listCountry=[],this.listStock=[],this.listProducts=[],this.loading=!0,this.buttonloading=!1,this.disabled=!1,this.limitSelection=!1,this.limitShow=!1,this.ShowFilter=!0,this.showAll=!0,this.submitted=!1,this.dropdownSettings={},this.Settings={},this.selectedItem=[],this.dtoptions={},this.dtTrigger=new S.x,this.keyLanguage="userLanguage",this.EntrestockForm=new r.cw({paysId:new r.NI(""),productId:new r.NI(""),quantity:new r.NI(""),enterDate:new r.NI(""),fabDate:new r.NI(""),expirDate:new r.NI(""),alertDate:new r.NI(""),alertQty:new r.NI("")}),this.translateService.use(localStorage.getItem(this.keyLanguage)),this.EntrestockForm=this.fb.group({paysId:["",r.kI.required],productId:["",r.kI.required],quantity:["",r.kI.required],enterDate:["",r.kI.required],fabDate:["",r.kI.required],expirDate:["",r.kI.required],alertDate:["",r.kI.required],alertQty:["",r.kI.required]})}ngOnInit(){this.getAllCountry(),this.getAllProducts(),this.dropdownSettings={singleSelection:!0,defaultOpen:!1,idField:"_id",textField:"country_name",tooltipField:"item_tooltip",enableCheckAll:this.showAll,itemsShowLimit:999999,allowSearchFilter:this.ShowFilter},this.Settings={singleSelection:!0,defaultOpen:!1,idField:"_id",textField:"name",tooltipField:"item_tooltip",enableCheckAll:this.showAll,itemsShowLimit:999999,allowSearchFilter:this.ShowFilter},this.dtoptions={pagingType:"full_numbers",searching:!0,paging:!0,lengthChange:!1,language:{searchPlaceholder:"Text Customer"}},this.getAllStock()}get f(){return this.EntrestockForm.controls}onSubmit(){var e=this;return(0,Z.Z)(function*(){if(e.submitted=!0,e.EntrestockForm?.invalid)return;let o={paysId:e.EntrestockForm.value.paysId[0]._id,productId:e.EntrestockForm.value.productId[0]._id,quantity:e.EntrestockForm.value.quantity,enterDate:e.EntrestockForm.value.enterDate,fabDate:e.EntrestockForm.value.fabDate,expirDate:e.EntrestockForm.value.expirDate,alertDate:e.EntrestockForm.value.alertDate,alertQty:e.EntrestockForm.value.alertQty};e.buttonloading=!0,e.stockService.registerStock(o).subscribe({next:s=>{console.log(s),e.toastrService.success("Le bordereau a bien \xe9t\xe9 ajout\xe9 \xe0 la base de donn\xe9es !"),e.buttonloading=!1,window.location.reload()},error:s=>{console.log(s),e.toastrService.error(s.statusText),e.buttonloading=!1}})})()}getAllCountry(){var e=this;return(0,Z.Z)(function*(){e.countryService.getAllCountries().subscribe({next:o=>{e.listCountry=o,e.loading=!1},error:o=>{console.log(o),e.toastrService.error(o.statusText),e.loading=!1}})})()}getAllStock(){this.stockService.getAllStocks().subscribe({next:e=>{this.listStock=e,this.dtTrigger.next(null),this.loading=!1},error:e=>{console.log(e),this.toastrService.error(e.statusText),this.loading=!1}})}getAllProducts(){var e=this;return(0,Z.Z)(function*(){e.productService.getAllProducts().subscribe({next:o=>{e.listProducts=o,e.loading=!1},error:o=>{console.log(o),e.toastrService.error(o.statusText),e.loading=!1}})})()}onItemSelect(e){console.log("onItemSelect",e),console.log("form model",this.EntrestockForm.value)}onItemDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.EntrestockForm.value)}onDropDownClose(){console.log("dropdown closed")}toogleShowAll(){this.showAll=!this.showAll,this.dropdownSettings=Object.assign({},this.dropdownSettings,{enableCheckAll:this.showAll})}toogleShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownSettings=Object.assign({},this.dropdownSettings,{allowSearchFilter:this.ShowFilter})}onItemProductSelect(e){console.log("onItemSelect",e),console.log("form model",this.EntrestockForm.value)}onItemProductDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.EntrestockForm.value)}onProductDropDownClose(){console.log("dropdown closed")}toogleProductShowAll(){this.showAll=!this.showAll,this.dropdownSettings=Object.assign({},this.dropdownSettings,{enableCheckAll:this.showAll})}toogleProductShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownSettings=Object.assign({},this.dropdownSettings,{allowSearchFilter:this.ShowFilter})}onDeleteStockEnter(e){this.stockService.removeStock(e).subscribe({next:o=>{this.toastrService.success(o),console.log(o),this.ngOnInit()},error:o=>{console.log(o),this.toastrService.error(o.statusText),this.buttonloading=!1}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.T),t.Y36(f.M),t.Y36(b.q),t.Y36(r.qu),t.Y36(v.eN),t.Y36(h._W),t.Y36(c.sK),t.Y36(g.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-entre-stock"]],decls:154,vars:96,consts:[[1,"container-fluid"],[1,"h3","mb-2","text-gray-800"],[1,"card","shadow","mb-4"],[1,"card-header","py-3"],[1,"m-0","font-weight-bold","text-primary"],["data-bs-toggle","modal","data-bs-target","#addEntreStockModal",1,"btn","btn-primary"],[1,"fa","fa-plus"],[1,"card-body"],[1,"table-responsive"],["datatable","",1,"row-border","hover","table","table-bordered",3,"dtOptions","dtTrigger"],[1,"text-center"],[4,"ngFor","ngForOf"],["id","addEntreStockModal","tabindex","-1","aria-labelledby","addEntreStockModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","addEntreStockModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-danger"],[1,"container"],[1,"col-lg-12","md-12"],[1,"col-md-3"],[1,"form-group"],[1,"mb-3"],["for","paysId"],[2,"color","red"],["formControlName","paysId",3,"placeholder","data","disabled","settings","onDropDownClose","onSelect","onDeSelect"],["for","product"],["formControlName","productId",3,"placeholder","data","disabled","settings","onDropDownClose","onSelect","onDeSelect"],[1,"form-group","mb-3"],["for","quantity"],["type","number","placeholder","15000","id","quantity","formControlName","quantity",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","enterDate"],["type","date","id","enterDate","formControlName","enterDate",1,"form-control",3,"ngClass"],["for","fabDate"],["type","date","id","fabDate","formControlName","fabDate",1,"form-control",3,"ngClass"],["for","expirDate"],["type","date","id","expirDate","formControlName","expirDate",1,"form-control",3,"ngClass"],["for","alertDate"],["type","date","id","alertDate","formControlName","alertDate",1,"form-control",3,"ngClass"],["type","number","id","alertQty","formControlName","alertQty",1,"form-control",3,"ngClass"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"spinner-border","spinner-border-sm"],[1,"invalid-feedback"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"h6",4)(7,"button",5),t._UZ(8,"i",6),t._uU(9),t.ALo(10,"translate"),t.qZA()()(),t.TgZ(11,"div",7)(12,"div",8)(13,"table",9)(14,"thead")(15,"tr")(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"th",10),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"th"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"th"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"th"),t._uU(35),t.ALo(36,"translate"),t.qZA()()(),t.TgZ(37,"tbody"),t.YNc(38,at,21,15,"tr",11),t.qZA()()()()()(),t.TgZ(39,"div",12)(40,"div",13)(41,"div",14)(42,"div",15)(43,"h3",16),t._uU(44),t.ALo(45,"translate"),t.qZA(),t._UZ(46,"button",17),t.qZA(),t.TgZ(47,"div",18)(48,"div",19)(49,"div",20)(50,"form",21),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(51,"button",22),t.YNc(52,lt,3,3,"ng-container",23),t.YNc(53,dt,1,0,"span",24),t.qZA(),t._uU(54,"\xa0 "),t.TgZ(55,"button",25),t._uU(56),t.ALo(57,"translate"),t.qZA(),t._UZ(58,"br"),t.TgZ(59,"div",26)(60,"div",19)(61,"div",27),t._UZ(62,"br"),t.TgZ(63,"div",19)(64,"div",28)(65,"div",29)(66,"div",30)(67,"div",20)(68,"label",31),t._uU(69),t.ALo(70,"translate"),t.TgZ(71,"span",32),t._uU(72,"*"),t.qZA()()(),t.TgZ(73,"div",20)(74,"ng-multiselect-dropdown",33),t.NdJ("onDropDownClose",function(){return o.onDropDownClose()})("onSelect",function(a){return o.onItemSelect(a)})("onDeSelect",function(a){return o.onItemDeSelect(a)}),t.qZA()()()()(),t.TgZ(75,"div",28)(76,"div",29)(77,"div",30)(78,"div",20)(79,"label",34),t._uU(80),t.ALo(81,"translate"),t.TgZ(82,"span",32),t._uU(83,"*"),t.qZA()()(),t.TgZ(84,"div",20)(85,"ng-multiselect-dropdown",35),t.NdJ("onDropDownClose",function(){return o.onProductDropDownClose()})("onSelect",function(a){return o.onItemProductSelect(a)})("onDeSelect",function(a){return o.onItemProductDeSelect(a)}),t.qZA()()()()(),t.TgZ(86,"div",28)(87,"div",36)(88,"div",20)(89,"label",37),t._uU(90),t.ALo(91,"translate"),t.TgZ(92,"span",32),t._uU(93,"*"),t.qZA()()(),t.TgZ(94,"div",20),t._UZ(95,"input",38),t.YNc(96,ct,2,1,"div",39),t.qZA()()(),t.TgZ(97,"div",28)(98,"div",36)(99,"div",20)(100,"label",40),t._uU(101),t.ALo(102,"translate"),t.TgZ(103,"span",32),t._uU(104,"*"),t.qZA()()(),t.TgZ(105,"div",20),t._UZ(106,"input",41),t.YNc(107,gt,2,1,"div",39),t.qZA()()()(),t.TgZ(108,"div",19)(109,"div",28)(110,"div",36)(111,"div",20)(112,"label",42),t._uU(113),t.ALo(114,"translate"),t.TgZ(115,"span",32),t._uU(116,"*"),t.qZA()()(),t.TgZ(117,"div",20),t._UZ(118,"input",43),t.YNc(119,ht,2,1,"div",39),t.qZA()()(),t.TgZ(120,"div",28)(121,"div",36)(122,"div",20)(123,"label",44),t._uU(124),t.ALo(125,"translate"),t.TgZ(126,"span",32),t._uU(127,"*"),t.qZA()()(),t.TgZ(128,"div",20),t._UZ(129,"input",45),t.YNc(130,bt,2,1,"div",39),t.qZA()()(),t.TgZ(131,"div",28)(132,"div",36)(133,"div",20)(134,"label",46),t._uU(135),t.ALo(136,"translate"),t.TgZ(137,"span",32),t._uU(138,"*"),t.qZA()()(),t.TgZ(139,"div",20),t._UZ(140,"input",47),t.YNc(141,ft,2,1,"div",39),t.qZA()()(),t.TgZ(142,"div",28)(143,"div",36)(144,"div",20)(145,"label",46),t._uU(146),t.ALo(147,"translate"),t.TgZ(148,"span",32),t._uU(149,"*"),t.qZA()()(),t.TgZ(150,"div",20),t._UZ(151,"input",48),t.YNc(152,St,2,1,"div",39),t.qZA()()()()()(),t._UZ(153,"br"),t.qZA()()()()()()()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,46,"GestionProduits")),t.xp6(7),t.hij("\xa0",t.lcZ(10,48,"NouvelleEntreesStock")," "),t.xp6(4),t.Q6J("dtOptions",o.dtoptions)("dtTrigger",o.dtTrigger),t.xp6(4),t.Oqu(t.lcZ(18,50,"DateEntre")),t.xp6(3),t.Oqu(t.lcZ(21,52,"PaysBeneficiaire")),t.xp6(3),t.Oqu(t.lcZ(24,54,"Produit")),t.xp6(3),t.Oqu(t.lcZ(27,56,"Quantite")),t.xp6(3),t.Oqu(t.lcZ(30,58,"DateFablication")),t.xp6(3),t.Oqu(t.lcZ(33,60,"DatePeremption")),t.xp6(3),t.Oqu(t.lcZ(36,62,"Action")),t.xp6(3),t.Q6J("ngForOf",o.listStock),t.xp6(6),t.Oqu(t.lcZ(45,64,"AjouterBordoreauEntree")),t.xp6(6),t.Q6J("formGroup",o.EntrestockForm),t.xp6(1),t.Q6J("disabled",o.buttonloading),t.xp6(1),t.Q6J("ngIf",!o.buttonloading),t.xp6(1),t.Q6J("ngIf",o.buttonloading),t.xp6(3),t.Oqu(t.lcZ(57,66,"Annuler")),t.xp6(13),t.Oqu(t.lcZ(70,68,"PaysReceptionStock")),t.xp6(5),t.Q6J("placeholder","Select Country")("data",o.listCountry)("disabled",o.disabled)("settings",o.dropdownSettings),t.xp6(6),t.Oqu(t.lcZ(81,70,"NomProduit")),t.xp6(5),t.Q6J("placeholder","Select Product")("data",o.listProducts)("disabled",o.disabled)("settings",o.Settings),t.xp6(5),t.hij("",t.lcZ(91,72,"Quantite")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(84,C,o.submitted&&o.f.quantity.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.quantity.errors),t.xp6(5),t.hij("",t.lcZ(102,74,"DateEntre")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(86,C,o.submitted&&o.f.enterDate.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.enterDate.errors),t.xp6(6),t.hij("",t.lcZ(114,76,"DateFablication")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(88,C,o.submitted&&o.f.fabDate.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.fabDate.errors),t.xp6(5),t.Oqu(t.lcZ(125,78,"DatePeremption")),t.xp6(5),t.Q6J("ngClass",t.VKq(90,C,o.submitted&&o.f.expirDate.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.expirDate.errors),t.xp6(5),t.hij("",t.lcZ(136,80,"DateAlert")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(92,C,o.submitted&&o.f.alertDate.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.alertDate.errors),t.xp6(5),t.hij("",t.lcZ(147,82,"QuantiteAlert")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(94,C,o.submitted&&o.f.alertQty.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.alertQty.errors))},dependencies:[T.OP,u.mk,u.sg,u.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,A.G,u.uU,c.X$]}),i})();const yt=function(i){return["/stock/stock-pays-international",i]};function Tt(i,n){if(1&i&&(t.TgZ(0,"div",8)(1,"div",9)(2,"div",5)(3,"div",10)(4,"div",11)(5,"div",12),t._uU(6),t.qZA()()()()()()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,yt,e._id)),t.xp6(5),t.hij(" ",e.country_name,"")}}let qt=(()=>{class i{constructor(e,o,s,a,l){this.http=e,this.countryService=o,this.stockService=s,this.toastrService=a,this.translateService=l,this.listProducts=[],this.dataPays=[],this.internationalPays=[],this.listCountry=[],this.loading=!0,this.buttonloading=!1,this.dtoptions={},this.dtTrigger=new S.x,this.keyLanguage="userLanguage",this.translateService.use(localStorage.getItem(this.keyLanguage))}ngOnInit(){this.dtoptions={pagingType:"full_numbers",searching:!0,paging:!0,lengthChange:!1,language:{searchPlaceholder:"Text Customer"}},this.getAllStock(),this.getAllCountry()}getAllStock(){this.stockService.getAllStockPays().subscribe({next:e=>{this.listProducts=e;for(let o=0;o<this.listProducts.length;o++)"C\xf4te d'Ivoire"!=this.listProducts[o].paysId.country_name&&(this.dataPays.push(this.listProducts[o]),this.dtTrigger.next(null),console.log("entr\xe9e en stock",this.dataPays),this.loading=!1)},error:e=>{console.log(e),this.toastrService.error(e.statusText),this.loading=!1}})}getAllCountry(){this.countryService.getAllCountries().subscribe({next:e=>{this.listCountry=e;for(let o=0;o<this.listCountry.length;o++)"C\xf4te d'Ivoire"!=this.listCountry[o].country_name&&this.internationalPays.push(this.listCountry[o])},error:e=>{console.log(e),this.loading=!1}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v.eN),t.Y36(q.T),t.Y36(b.q),t.Y36(h._W),t.Y36(c.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-international-stock"]],decls:11,vars:4,consts:[[1,"container-fluid"],[1,"shadow","p-3","mb-5","bg-body","rounded"],[1,"h3","mb-2","text-gray-800"],["routerLink","/stock",1,"btn","btn-outline-primary"],[1,"card","shadow","mb-4"],[1,"card-body"],[1,"row"],["class","col-xl-3 col-md-3 mb-3",4,"ngFor","ngForOf"],[1,"col-xl-3","col-md-3","mb-3"],[1,"card","border-left-primary","border-bottom-primary","shadow","h-100","py-2",2,"cursor","pointer",3,"routerLink"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-primary","text-center","text-uppercase","mb-1"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",3),t._uU(6,"back"),t.qZA()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6),t.YNc(10,Tt,7,4,"div",7),t.qZA()()()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"StockDispoInter")," "),t.xp6(7),t.Q6J("ngForOf",o.internationalPays))},dependencies:[u.sg,g.rH,c.X$]}),i})();function wt(i,n){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&i){const e=n.$implicit;t.xp6(2),t.hij(" ",e.productId.name," "),t.xp6(2),t.hij(" ",e.quantity," ")}}let xt=(()=>{class i{constructor(e,o,s,a){this.http=e,this.stockService=o,this.toastrService=s,this.translateService=a,this.listProducts=[],this.dataPays=[],this.loading=!0,this.buttonloading=!1,this.keyLanguage="userLanguage",this.translateService.use(localStorage.getItem(this.keyLanguage))}ngOnInit(){this.getAllStock()}getAllStock(){this.stockService.getAllStockPays().subscribe({next:e=>{this.listProducts=e;for(let o=0;o<this.listProducts.length;o++)"C\xf4te d'Ivoire"==this.listProducts[o].paysId.country_name&&this.dataPays.push(this.listProducts[o]);this.loading=!1},error:e=>{console.log(e),this.toastrService.error(e.statusText),this.loading=!1}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v.eN),t.Y36(b.q),t.Y36(h._W),t.Y36(c.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-national"]],decls:19,vars:10,consts:[[1,"container-fluid"],[1,"h3","mb-2","text-gray-800"],[1,"card","shadow","mb-4"],[1,"card-header","py-3"],[1,"card-body"],[1,"table-responsive"],[1,"row-border","hover","table","table-bordered"],[4,"ngFor","ngForOf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t._UZ(5,"div",3),t.TgZ(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,wt,5,2,"tr",7),t.qZA()()()()()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"StockDispo")),t.xp6(10),t.Oqu(t.lcZ(13,6,"Libelle")),t.xp6(3),t.Oqu(t.lcZ(16,8,"Quantite")),t.xp6(3),t.Q6J("ngForOf",o.dataPays))},dependencies:[u.sg,c.X$]}),i})();function Ct(i,n){1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Sauver")))}function kt(i,n){1&i&&t._UZ(0,"span",29)}function It(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"nomProduitObligatoire")))}function Ut(i,n){if(1&i&&(t.TgZ(0,"div",30),t.YNc(1,It,3,3,"div",10),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.name.errors.required)}}function Ft(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"PrixObligatoire")))}function Pt(i,n){if(1&i&&(t.TgZ(0,"div",30),t.YNc(1,Ft,3,3,"div",10),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.price.errors.required)}}const Dt=function(){return["/admins"]},L=function(i){return{"is-invalid":i}};let Lt=(()=>{class i{constructor(e,o,s,a,l,d,p){this.fb=e,this.http=o,this.route=s,this.router=a,this.productService=l,this.toastrService=d,this.translateService=p,this.keyLanguage="userLanguage",this.loading=!0,this.buttonloading=!1,this.selectedItems=[],this.RoleselectedItems=[],this.submitted=!1,this.translateService.use(localStorage.getItem(this.keyLanguage)),this.producteditForm=this.fb.group({name:["",r.kI.required],price:["",r.kI.required],disponibilite:["",r.kI.required]})}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");this.productService.getSingleProduct(e).subscribe(o=>{this.name=o.name,this.producteditForm.patchValue({name:o.name,price:o.price,disponibilite:o.disponibilite})})}get f(){return this.producteditForm.controls}onSubmit(){const e=this.route.snapshot.paramMap.get("id");this.submitted=!0,this.producteditForm?.invalid||(this.producteditForm.value.disponibilite=1==this.producteditForm.value.disponibilite?"Oui":"Non",this.productService.updateProduct(e,{productId:"",name:this.producteditForm.value.name,price:this.producteditForm.value.price,disponibilite:this.producteditForm.value.disponibilite,quantity:0}).subscribe({next:s=>{this.toastrService.success(`Les informations du produit ${s.name} ont bien \xe9t\xe9 modifi\xe9es !`),this.buttonloading=!1,this.router.navigate(["/stock/product"])},error:s=>{console.log(s),this.toastrService.error(s.error.message),this.buttonloading=!1}}))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.qu),t.Y36(v.eN),t.Y36(g.gz),t.Y36(g.F0),t.Y36(f.M),t.Y36(h._W),t.Y36(c.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-product"]],decls:56,vars:30,consts:[[1,"container-fluid"],[1,"shadow","p-3","mb-5","bg-body","rounded"],[1,"h3","mb-2","text-gray-800"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"card","shadow","mb-4"],[1,"card-body"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-danger"],[1,"container"],[1,"col-lg-12","md-12"],[1,"col-md-3"],[1,"form-group"],[1,"mb-3"],["for","product"],[2,"color","red"],["type","text","placeholder","Oroki","id","product","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","mb-3"],["for","price"],["type","number","placeholder","15000","id","price","formControlName","price",1,"form-control",3,"ngClass"],[1,"col-md-4"],[1,"form-check","form-switch"],["type","checkbox","id","flexSwitchCheckChecked","formControlName","disponibilite",1,"form-check-input"],["for","flexSwitchCheckChecked",1,"form-check-label"],[1,"spinner-border","spinner-border-sm"],[1,"invalid-feedback"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",3),t._uU(6,"back"),t.qZA()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"form",8),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(12,"button",9),t.YNc(13,Ct,3,3,"ng-container",10),t.YNc(14,kt,1,0,"span",11),t.qZA(),t._uU(15,"\xa0 "),t.TgZ(16,"button",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"div",13)(21,"div",13)(22,"div",6)(23,"div",14),t._UZ(24,"br"),t.TgZ(25,"div",6)(26,"div",15)(27,"div",16)(28,"div",17)(29,"div",7)(30,"label",18),t._uU(31),t.ALo(32,"translate"),t.TgZ(33,"span",19),t._uU(34,"*"),t.qZA()()(),t.TgZ(35,"div",7),t._UZ(36,"input",20),t.YNc(37,Ut,2,1,"div",21),t.qZA()()()(),t.TgZ(38,"div",15)(39,"div",22)(40,"div",7)(41,"label",23),t._uU(42),t.ALo(43,"translate"),t.TgZ(44,"span",19),t._uU(45,"*"),t.qZA()()(),t.TgZ(46,"div",7),t._UZ(47,"input",24),t.YNc(48,Pt,2,1,"div",21),t.qZA()()()()(),t.TgZ(49,"div",25)(50,"div",26),t._UZ(51,"input",27),t.TgZ(52,"label",28),t._uU(53),t.ALo(54,"translate"),t.qZA()()()(),t._UZ(55,"br"),t.qZA()()()()()()()()),2&e&&(t.xp6(3),t.AsE(" ",t.lcZ(4,15,"ModifProduct"),": ",o.name,""),t.xp6(2),t.Q6J("routerLink",t.DdM(25,Dt)),t.xp6(6),t.Q6J("formGroup",o.producteditForm),t.xp6(1),t.Q6J("disabled",o.buttonloading),t.xp6(1),t.Q6J("ngIf",!o.buttonloading),t.xp6(1),t.Q6J("ngIf",o.buttonloading),t.xp6(3),t.Oqu(t.lcZ(18,17,"Annuler")),t.xp6(14),t.hij(" ",t.lcZ(32,19,"NomProduit"),""),t.xp6(5),t.Q6J("ngClass",t.VKq(26,L,o.submitted&&o.f.name.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.name.errors),t.xp6(5),t.hij("",t.lcZ(43,21,"CoutUnitaire")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(28,L,o.submitted&&o.f.price.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.price.errors),t.xp6(5),t.Oqu(t.lcZ(54,23,"Disponibilite")))},dependencies:[u.mk,u.O5,g.rH,r._Y,r.Fj,r.wV,r.Wl,r.JJ,r.JL,r.sg,r.u,c.X$],encapsulation:2}),i})();function Ot(i,n){if(1&i&&(t.TgZ(0,"tr")(1,"td",8),t._uU(2),t.qZA(),t.TgZ(3,"td",8),t._uU(4),t.qZA()()),2&i){const e=n.$implicit;t.xp6(2),t.hij(" ",e.productId.name," "),t.xp6(2),t.hij(" ",e.quantity," ")}}let Nt=(()=>{class i{constructor(e,o,s,a,l,d){this.http=e,this.route=o,this.countryService=s,this.stockService=a,this.toastrService=l,this.translateService=d,this.listProducts=[],this.dataPays=[],this.loading=!0,this.buttonloading=!1,this.dtoptions={},this.dtTrigger=new S.x,this.keyLanguage="userLanguage",this.translateService.use(localStorage.getItem(this.keyLanguage))}ngOnInit(){this.getAllStock(),this.gecountry()}gecountry(){const e=this.route.snapshot.paramMap.get("id");this.countryService.getSingleCountry(e).subscribe(o=>{this.country=o.country_name})}getAllStock(){const e=this.route.snapshot.paramMap.get("id");this.stockService.getAllStockByPays(e).subscribe({next:o=>{this.listProducts=o},error:o=>{console.log(o),this.toastrService.error(o.statusText),this.loading=!1}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v.eN),t.Y36(g.gz),t.Y36(q.T),t.Y36(b.q),t.Y36(h._W),t.Y36(c.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-stock-pays-international"]],decls:20,vars:11,consts:[[1,"container-fluid"],[1,"shadow","p-3","mb-5","bg-body","rounded"],[1,"h3","mb-2","text-gray-800"],["routerLink","/stock/international-stock",1,"btn","btn-outline-primary"],[1,"card","shadow","mb-4"],[1,"table-responsive"],[1,"row-border","hover","table","table-bordered"],[4,"ngFor","ngForOf"],[2,"cursor","pointer"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",3),t._uU(6,"back"),t.qZA()(),t.TgZ(7,"div",4)(8,"div",5)(9,"table",6)(10,"thead")(11,"tr")(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,Ot,5,2,"tr",7),t.qZA()()()()()),2&e&&(t.xp6(3),t.AsE(" ",t.lcZ(4,5,"StockPays")," ",o.country," "),t.xp6(10),t.Oqu(t.lcZ(14,7,"Libelle")),t.xp6(3),t.Oqu(t.lcZ(17,9,"Quantite")),t.xp6(3),t.Q6J("ngForOf",o.listProducts))},dependencies:[u.sg,g.rH,c.X$]}),i})();const Qt=function(i){return["/entrepot/stock-alert-edit",i]};function Jt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",12),t._uU(2),t.qZA(),t.TgZ(3,"td",12),t._uU(4),t.qZA(),t.TgZ(5,"td",12)(6,"a",40),t._UZ(7,"i",41),t.qZA(),t._uU(8,"\xa0 "),t.TgZ(9,"a",42),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.onDeleteStockAlertpays(a._id))}),t._UZ(10,"i",43),t.qZA()()()}if(2&i){const e=n.$implicit;t.xp6(2),t.hij(" ",e.productId.name," "),t.xp6(2),t.hij(" ",e.alertQty," "),t.xp6(2),t.Q6J("routerLink",t.VKq(3,Qt,e._id))}}function Et(i,n){1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Sauver")))}function Yt(i,n){1&i&&t._UZ(0,"span",44)}function Mt(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function jt(i,n){if(1&i&&(t.TgZ(0,"div",45),t.YNc(1,Mt,3,3,"div",25),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.alertQty.errors.required)}}const Vt=function(i){return{"is-invalid":i}};let Bt=(()=>{class i{constructor(e,o,s,a,l,d,p,_){this.countryService=e,this.productService=o,this.stockService=s,this.fb=a,this.http=l,this.toastrService=d,this.translateService=p,this.router=_,this.listCountry=[],this.listStock=[],this.listProducts=[],this.loading=!0,this.buttonloading=!1,this.disabled=!1,this.limitSelection=!1,this.limitShow=!1,this.ShowFilter=!0,this.showAll=!0,this.submitted=!1,this.dropdownSettings={},this.Settings={},this.selectedItem=[],this.keyLanguage="userLanguage",this.quantityalertForm=new r.cw({productId:new r.NI(""),alertQty:new r.NI("")}),this.translateService.use(localStorage.getItem(this.keyLanguage)),this.quantityalertForm=this.fb.group({productId:["",r.kI.required],alertQty:["",r.kI.required]})}ngOnInit(){this.getAllProducts(),this.dropdownSettings={singleSelection:!0,defaultOpen:!1,idField:"_id",textField:"name",tooltipField:"item_tooltip",enableCheckAll:this.showAll,itemsShowLimit:999999,allowSearchFilter:this.ShowFilter},this.getAllStockalertpays()}get f(){return this.quantityalertForm.controls}onSubmit(){var e=this;return(0,Z.Z)(function*(){if(e.submitted=!0,e.quantityalertForm?.invalid)return;let o={productId:e.quantityalertForm.value.productId[0]._id,alertQty:e.quantityalertForm.value.alertQty};e.buttonloading=!0,e.stockService.registerStockalertspays(o).subscribe({next:s=>{e.toastrService.success("Le bordereau a bien \xe9t\xe9 ajout\xe9 \xe0 la base de donn\xe9es !"),e.buttonloading=!1,window.location.reload()},error:s=>{console.log(s),e.toastrService.error(s.error.message),e.buttonloading=!1}})})()}getAllStockalertpays(){this.stockService.getAllStockalertpays().subscribe({next:e=>{this.listStock=e,console.log("listStock",this.listStock),this.loading=!1},error:e=>{console.log(e),this.toastrService.error(e.statusText),this.loading=!1}})}getAllProducts(){this.productService.getAllProducts().subscribe({next:e=>{this.listProducts=e,console.log(this.listProducts),this.loading=!1},error:e=>{console.log(e),this.loading=!1}})}onItemSelect(e){console.log("onItemSelect",e),console.log("form model",this.quantityalertForm.value)}onItemDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.quantityalertForm.value)}onDropDownClose(){console.log("dropdown closed")}toogleShowAll(){this.showAll=!this.showAll,this.dropdownSettings=Object.assign({},this.dropdownSettings,{enableCheckAll:this.showAll})}toogleShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownSettings=Object.assign({},this.dropdownSettings,{allowSearchFilter:this.ShowFilter})}onItemProductSelect(e){console.log("onItemSelect",e),console.log("form model",this.quantityalertForm.value)}onItemProductDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.quantityalertForm.value)}onProductDropDownClose(){console.log("dropdown closed")}toogleProductShowAll(){this.showAll=!this.showAll,this.dropdownSettings=Object.assign({},this.dropdownSettings,{enableCheckAll:this.showAll})}toogleProductShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownSettings=Object.assign({},this.dropdownSettings,{allowSearchFilter:this.ShowFilter})}onDeleteStockAlertpays(e){this.stockService.deleteStockalertpays(e).subscribe({next:o=>{this.toastrService.success(o),console.log(o),this.ngOnInit()},error:o=>{console.log(o),this.toastrService.error(o.statusText),this.buttonloading=!1}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.T),t.Y36(f.M),t.Y36(b.q),t.Y36(r.qu),t.Y36(v.eN),t.Y36(h._W),t.Y36(c.sK),t.Y36(g.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-stock-alert-pays"]],decls:78,vars:40,consts:[[1,"container-fluid"],[1,"shadow","p-3","mb-5","bg-body","rounded"],[1,"h3","mb-2","text-gray-800"],["routerLink","/entrepot",1,"btn","btn-outline-primary"],[1,"card","shadow","mb-4"],[1,"card-header","py-3"],[1,"m-0","font-weight-bold","text-primary"],["data-bs-toggle","modal","data-bs-target","#addEntreStockModal",1,"btn","btn-primary"],[1,"fa","fa-plus"],[1,"card-body"],[1,"table-responsive"],[1,"row-border","hover","table","table-bordered"],[1,"text-center"],[4,"ngFor","ngForOf"],["id","addEntreStockModal","tabindex","-1","aria-labelledby","addEntreStockModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","addEntreStockModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-danger"],[1,"container"],[1,"col-lg-12","md-12"],[1,"col-md-6"],[1,"form-group"],[1,"mb-3"],["for","product"],[2,"color","red"],["formControlName","productId",3,"placeholder","data","disabled","settings","onDropDownClose","onSelect","onDeSelect"],[1,"form-group","mb-3"],["for","alertDate"],["type","number","id","alertQty","formControlName","alertQty",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa","fa-pencil"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"spinner-border","spinner-border-sm"],[1,"invalid-feedback"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",3),t._uU(6,"back"),t.qZA()(),t.TgZ(7,"div",4)(8,"div",5)(9,"h6",6)(10,"button",7),t._UZ(11,"i",8),t._uU(12),t.ALo(13,"translate"),t.qZA()()(),t.TgZ(14,"div",9)(15,"div",10)(16,"table",11)(17,"thead")(18,"tr")(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",12),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"th"),t._uU(26),t.ALo(27,"translate"),t.qZA()()(),t.TgZ(28,"tbody"),t.YNc(29,Jt,11,5,"tr",13),t.qZA()()()()()(),t.TgZ(30,"div",14)(31,"div",15)(32,"div",16)(33,"div",17)(34,"h3",18),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"button",19),t.qZA(),t.TgZ(38,"div",20)(39,"div",21)(40,"div",22)(41,"form",23),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(42,"button",24),t.YNc(43,Et,3,3,"ng-container",25),t.YNc(44,Yt,1,0,"span",26),t.qZA(),t._uU(45,"\xa0 "),t.TgZ(46,"button",27),t._uU(47),t.ALo(48,"translate"),t.qZA(),t._UZ(49,"br"),t.TgZ(50,"div",28)(51,"div",21)(52,"div",29),t._UZ(53,"br"),t.TgZ(54,"div",21)(55,"div",30)(56,"div",31)(57,"div",32)(58,"div",22)(59,"label",33),t._uU(60),t.ALo(61,"translate"),t.TgZ(62,"span",34),t._uU(63,"*"),t.qZA()()(),t.TgZ(64,"div",22)(65,"ng-multiselect-dropdown",35),t.NdJ("onDropDownClose",function(){return o.onProductDropDownClose()})("onSelect",function(a){return o.onItemProductSelect(a)})("onDeSelect",function(a){return o.onItemProductDeSelect(a)}),t.qZA()()()()(),t.TgZ(66,"div",30)(67,"div",36)(68,"div",22)(69,"label",37),t._uU(70),t.ALo(71,"translate"),t.TgZ(72,"span",34),t._uU(73,"*"),t.qZA()()(),t.TgZ(74,"div",22),t._UZ(75,"input",38),t.YNc(76,jt,2,1,"div",39),t.qZA()()()()()(),t._UZ(77,"br"),t.qZA()()()()()()()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,20,"GestionquantiyalertPays")," "),t.xp6(9),t.hij("\xa0",t.lcZ(13,22,"quantiyalertentrepot")," "),t.xp6(8),t.Oqu(t.lcZ(21,24,"Produit")),t.xp6(3),t.Oqu(t.lcZ(24,26,"QuantiteAlert")),t.xp6(3),t.Oqu(t.lcZ(27,28,"Action")),t.xp6(3),t.Q6J("ngForOf",o.listStock),t.xp6(6),t.Oqu(t.lcZ(36,30,"quantiyalertentrepot")),t.xp6(6),t.Q6J("formGroup",o.quantityalertForm),t.xp6(1),t.Q6J("disabled",o.buttonloading),t.xp6(1),t.Q6J("ngIf",!o.buttonloading),t.xp6(1),t.Q6J("ngIf",o.buttonloading),t.xp6(3),t.Oqu(t.lcZ(48,32,"Annuler")),t.xp6(13),t.Oqu(t.lcZ(61,34,"NomProduit")),t.xp6(5),t.Q6J("placeholder","Select Product")("data",o.listProducts)("disabled",o.disabled)("settings",o.dropdownSettings),t.xp6(5),t.hij("",t.lcZ(71,36,"QuantiteAlert")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(38,Vt,o.submitted&&o.f.alertQty.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.alertQty.errors))},dependencies:[T.OP,u.mk,u.sg,u.O5,g.rH,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,c.X$]}),i})();function Kt(i,n){1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Sauver")))}function Gt(i,n){1&i&&t._UZ(0,"span",26)}function $t(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function Rt(i,n){if(1&i&&(t.TgZ(0,"div",27),t.YNc(1,$t,3,3,"div",11),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.alertQty.errors.required)}}const Xt=function(i){return{"is-invalid":i}};let Ht=(()=>{class i{constructor(e,o,s,a,l,d,p,_,w){this.countryService=e,this.productService=o,this.stockService=s,this.fb=a,this.http=l,this.toastrService=d,this.translateService=p,this.router=_,this.route=w,this.listCountry=[],this.listStock=[],this.listProducts=[],this.selectedItems=[],this.loading=!0,this.buttonloading=!1,this.disabled=!1,this.limitSelection=!1,this.limitShow=!1,this.ShowFilter=!0,this.showAll=!0,this.submitted=!1,this.dropdownSettings={},this.Settings={},this.selectedItem=[],this.keyLanguage="userLanguage",this.editquantityalertForm=new r.cw({productId:new r.NI(""),alertQty:new r.NI("")}),this.translateService.use(localStorage.getItem(this.keyLanguage)),this.editquantityalertForm=this.fb.group({productId:["",r.kI.required],alertQty:["",r.kI.required]})}ngOnInit(){this.getAllProducts();const e=this.route.snapshot.paramMap.get("id");this.stockService.getsingleStockalertpays(e).subscribe(o=>{console.log("res",o),this.alertQty=o.alertQty,this.produit=o.productId.name,this.editquantityalertForm.patchValue({alertQty:o.alertQty,productId:[o.productId]})}),this.dropdownSettings={singleSelection:!0,defaultOpen:!1,idField:"_id",textField:"name",tooltipField:"item_tooltip",enableCheckAll:this.showAll,itemsShowLimit:999999,allowSearchFilter:this.ShowFilter},this.getAllStockalert()}get f(){return this.editquantityalertForm.controls}onSubmit(){var e=this;return(0,Z.Z)(function*(){if(e.submitted=!0,e.editquantityalertForm?.invalid)return;let o={productId:e.editquantityalertForm.value.productId[0]._id,alertQty:e.editquantityalertForm.value.alertQty};e.buttonloading=!0,e.stockService.registerStockalertspays(o).subscribe({next:s=>{e.toastrService.success("Le bordereau a bien \xe9t\xe9 ajout\xe9 \xe0 la base de donn\xe9es !"),e.buttonloading=!1,window.location.reload()},error:s=>{console.log(s),e.toastrService.error(s.error.message),e.buttonloading=!1}})})()}getAllStockalert(){this.stockService.getAllStockalertpays().subscribe({next:e=>{this.listStock=e,console.log("listStock",this.listStock),this.loading=!1},error:e=>{console.log(e),this.toastrService.error(e.statusText),this.loading=!1}})}getAllProducts(){this.productService.getAllProducts().subscribe({next:e=>{this.listProducts=e,console.log(this.listProducts),this.loading=!1},error:e=>{console.log(e),this.loading=!1}})}onItemSelect(e){console.log("onItemSelect",e),console.log("form model",this.editquantityalertForm.value)}onItemDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.editquantityalertForm.value)}onDropDownClose(){console.log("dropdown closed")}toogleShowAll(){this.showAll=!this.showAll,this.dropdownSettings=Object.assign({},this.dropdownSettings,{enableCheckAll:this.showAll})}toogleShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownSettings=Object.assign({},this.dropdownSettings,{allowSearchFilter:this.ShowFilter})}onItemProductSelect(e){console.log("onItemSelect",e),console.log("form model",this.editquantityalertForm.value)}onItemProductDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.editquantityalertForm.value)}onProductDropDownClose(){console.log("dropdown closed")}toogleProductShowAll(){this.showAll=!this.showAll,this.dropdownSettings=Object.assign({},this.dropdownSettings,{enableCheckAll:this.showAll})}toogleProductShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownSettings=Object.assign({},this.dropdownSettings,{allowSearchFilter:this.ShowFilter})}onDeleteStockEnter(e){this.stockService.deleteStockalertentrepot(e).subscribe({next:o=>{this.toastrService.success(o),console.log(o),this.ngOnInit()},error:o=>{console.log(o),this.toastrService.error(o.statusText),this.buttonloading=!1}})}annuler(){this.router.navigate(["/entrepot/stock-alert-entrepot"])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.T),t.Y36(f.M),t.Y36(b.q),t.Y36(r.qu),t.Y36(v.eN),t.Y36(h._W),t.Y36(c.sK),t.Y36(g.F0),t.Y36(g.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-stock-alert-pays"]],decls:49,vars:25,consts:[[1,"container-fluid"],[1,"shadow","p-3","mb-5","bg-body","rounded"],[1,"h3","mb-2","text-gray-800"],["routerLink","/entrepot",1,"btn","btn-outline-primary"],[1,"card","shadow","mb-4"],[1,"card-header","py-3"],[1,"card-body"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],[1,"container"],[1,"col-lg-12","md-12"],[1,"col-md-6"],[1,"form-group"],[1,"mb-3"],["for","product"],[2,"color","red"],["formControlName","productId",3,"placeholder","data","disabled","settings","onDropDownClose","onSelect","onDeSelect"],[1,"form-group","mb-3"],["for","alertDate"],["type","number","id","alertQty","formControlName","alertQty",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],[1,"invalid-feedback"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",3),t._uU(6,"back"),t.qZA()(),t.TgZ(7,"div",4),t._UZ(8,"div",5),t.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"form",9),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(13,"button",10),t.YNc(14,Kt,3,3,"ng-container",11),t.YNc(15,Gt,1,0,"span",12),t.qZA(),t._uU(16,"\xa0 "),t.TgZ(17,"button",13),t.NdJ("click",function(){return o.annuler()}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"br"),t.TgZ(21,"div",14)(22,"div",7)(23,"div",15),t._UZ(24,"br"),t.TgZ(25,"div",7)(26,"div",16)(27,"div",17)(28,"div",18)(29,"div",8)(30,"label",19),t._uU(31),t.ALo(32,"translate"),t.TgZ(33,"span",20),t._uU(34,"*"),t.qZA()()(),t.TgZ(35,"div",8)(36,"ng-multiselect-dropdown",21),t.NdJ("onDropDownClose",function(){return o.onProductDropDownClose()})("onSelect",function(a){return o.onItemProductSelect(a)})("onDeSelect",function(a){return o.onItemProductDeSelect(a)}),t.qZA()()()()(),t.TgZ(37,"div",16)(38,"div",22)(39,"div",8)(40,"label",23),t._uU(41),t.ALo(42,"translate"),t.TgZ(43,"span",20),t._uU(44,"*"),t.qZA()()(),t.TgZ(45,"div",8),t._UZ(46,"input",24),t.YNc(47,Rt,2,1,"div",25),t.qZA()()()()()(),t._UZ(48,"br"),t.qZA()()()()()()()),2&e&&(t.xp6(3),t.AsE(" ",t.lcZ(4,15,"ModifStockAlertePays")," ",o.produit," "),t.xp6(9),t.Q6J("formGroup",o.editquantityalertForm),t.xp6(1),t.Q6J("disabled",o.buttonloading),t.xp6(1),t.Q6J("ngIf",!o.buttonloading),t.xp6(1),t.Q6J("ngIf",o.buttonloading),t.xp6(3),t.Oqu(t.lcZ(19,17,"Annuler")),t.xp6(13),t.Oqu(t.lcZ(32,19,"NomProduit")),t.xp6(5),t.Q6J("placeholder","Select Product")("data",o.listProducts)("disabled",o.disabled)("settings",o.dropdownSettings),t.xp6(5),t.hij("",t.lcZ(42,21,"QuantiteAlert")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(23,Xt,o.submitted&&o.f.alertQty.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.alertQty.errors))},dependencies:[T.OP,u.mk,u.O5,g.rH,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,c.X$]}),i})();function Wt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div"),t._uU(3),t.ALo(4,"date"),t.qZA()(),t.TgZ(5,"td")(6,"div"),t._uU(7),t.qZA()(),t.TgZ(8,"td",10),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td",10),t._uU(12),t.qZA(),t.TgZ(13,"td",10),t._uU(14),t.qZA(),t.TgZ(15,"td",10),t._uU(16),t.ALo(17,"date"),t.qZA(),t.TgZ(18,"td",10),t._uU(19),t.ALo(20,"date"),t.qZA(),t.TgZ(21,"td",10),t._uU(22),t.ALo(23,"date"),t.qZA(),t.TgZ(24,"td",10)(25,"a",48),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.onDeletesortieStockPaysentrepot(a._id))}),t._UZ(26,"i",49),t.qZA()()()}if(2&i){const e=n.$implicit;t.xp6(3),t.Oqu(t.xi3(4,8,e.sortieDate,"dd MMMM yyyy")),t.xp6(4),t.Oqu(e.paysId.country_name),t.xp6(2),t.hij(" ",t.lcZ(10,11,"sorties.destination")," "),t.xp6(3),t.hij(" ",e.productId.name," "),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",t.xi3(17,13,e.fabDate,"dd MMMM yyyy")," "),t.xp6(3),t.hij(" ",t.xi3(20,16,e.expirDate,"dd MMMM yyyy")," "),t.xp6(3),t.hij(" ",t.xi3(23,19,e.alertDate,"dd MMMM yyyy")," ")}}function zt(i,n){1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Sauver")))}function te(i,n){1&i&&t._UZ(0,"span",50)}function ee(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function oe(i,n){if(1&i&&(t.TgZ(0,"div",51),t.YNc(1,ee,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.quantity.errors.required)}}function ie(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function ne(i,n){if(1&i&&(t.TgZ(0,"div",51),t.YNc(1,ie,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.sortieDate.errors.required)}}function re(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function se(i,n){if(1&i&&(t.TgZ(0,"div",51),t.YNc(1,re,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.fabDate.errors.required)}}function ae(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function le(i,n){if(1&i&&(t.TgZ(0,"div",51),t.YNc(1,ae,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.expirDate.errors.required)}}function de(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function ue(i,n){if(1&i&&(t.TgZ(0,"div",51),t.YNc(1,de,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.alertDate.errors.required)}}const k=function(i){return{"is-invalid":i}};let ce=(()=>{class i{constructor(e,o,s,a,l,d,p,_){this.countryService=e,this.productService=o,this.stockService=s,this.fb=a,this.http=l,this.toastrService=d,this.translateService=p,this.router=_,this.listCountry=[],this.listStock=[],this.listProducts=[],this.loading=!0,this.buttonloading=!1,this.disabled=!1,this.limitSelection=!1,this.limitShow=!1,this.ShowFilter=!0,this.showAll=!0,this.submitted=!1,this.dropdownSettings={},this.Settings={},this.selectedItem=[],this.dtoptions={},this.dtTrigger=new S.x,this.keyLanguage="userLanguage",this.EntrestockForm=new r.cw({paysId:new r.NI(""),productId:new r.NI(""),quantity:new r.NI(""),sortieDate:new r.NI(""),fabDate:new r.NI(""),expirDate:new r.NI(""),alertDate:new r.NI("")}),this.translateService.use(localStorage.getItem(this.keyLanguage)),this.EntrestockForm=this.fb.group({paysId:["",r.kI.required],productId:["",r.kI.required],quantity:["",r.kI.required],sortieDate:["",r.kI.required],fabDate:["",r.kI.required],expirDate:["",r.kI.required],alertDate:["",r.kI.required]})}ngOnInit(){this.getAllCountry(),this.getAllProducts(),this.dropdownSettings={singleSelection:!0,defaultOpen:!1,idField:"_id",textField:"country_name",tooltipField:"item_tooltip",enableCheckAll:this.showAll,itemsShowLimit:999999,allowSearchFilter:this.ShowFilter},this.Settings={singleSelection:!0,defaultOpen:!1,idField:"_id",textField:"name",tooltipField:"item_tooltip",enableCheckAll:this.showAll,itemsShowLimit:999999,allowSearchFilter:this.ShowFilter},this.dtoptions={pagingType:"full_numbers",searching:!0,paging:!0,lengthChange:!1,language:{searchPlaceholder:"Text Customer"}},this.getAllStock()}get f(){return this.EntrestockForm.controls}onSubmit(){var e=this;return(0,Z.Z)(function*(){if(e.submitted=!0,e.EntrestockForm?.invalid)return;let o={paysId:e.EntrestockForm.value.paysId[0]._id,productId:e.EntrestockForm.value.productId[0]._id,quantity:e.EntrestockForm.value.quantity,sortieDate:e.EntrestockForm.value.sortieDate,fabDate:e.EntrestockForm.value.fabDate,expirDate:e.EntrestockForm.value.expirDate,alertDate:e.EntrestockForm.value.alertDate,destination:"entrepot"};e.buttonloading=!0,e.stockService.registermvtStockpaysentrepot(o).subscribe({next:s=>{console.log(s),e.toastrService.success("Le bordereau a bien \xe9t\xe9 ajout\xe9 \xe0 la base de donn\xe9es !"),e.buttonloading=!1,window.location.reload()},error:s=>{console.log(s),e.toastrService.error(s.error.message),e.buttonloading=!1}})})()}getAllCountry(){var e=this;return(0,Z.Z)(function*(){e.countryService.getAllCountries().subscribe({next:o=>{e.listCountry=o,e.loading=!1},error:o=>{console.log(o),e.toastrService.error(o.statusText),e.loading=!1}})})()}getAllStock(){this.stockService.getAllmvtStockspaysentrepot().subscribe({next:e=>{this.listStock=e,this.dtTrigger.next(null),this.loading=!1},error:e=>{console.log(e),this.toastrService.error(e.statusText),this.loading=!1}})}getAllProducts(){var e=this;return(0,Z.Z)(function*(){e.productService.getAllProducts().subscribe({next:o=>{e.listProducts=o,e.loading=!1},error:o=>{console.log(o),e.toastrService.error(o.statusText),e.loading=!1}})})()}onItemSelect(e){console.log("onItemSelect",e),console.log("form model",this.EntrestockForm.value)}onItemDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.EntrestockForm.value)}onDropDownClose(){console.log("dropdown closed")}toogleShowAll(){this.showAll=!this.showAll,this.dropdownSettings=Object.assign({},this.dropdownSettings,{enableCheckAll:this.showAll})}toogleShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownSettings=Object.assign({},this.dropdownSettings,{allowSearchFilter:this.ShowFilter})}onItemProductSelect(e){console.log("onItemSelect",e),console.log("form model",this.EntrestockForm.value)}onItemProductDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.EntrestockForm.value)}onProductDropDownClose(){console.log("dropdown closed")}toogleProductShowAll(){this.showAll=!this.showAll,this.dropdownSettings=Object.assign({},this.dropdownSettings,{enableCheckAll:this.showAll})}toogleProductShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownSettings=Object.assign({},this.dropdownSettings,{allowSearchFilter:this.ShowFilter})}onDeletesortieStockPaysentrepot(e){this.stockService.deletemvtStockspaysentrepot(e).subscribe({next:o=>{this.toastrService.success(o),console.log(o),window.location.reload()},error:o=>{console.log(o),this.toastrService.error(o.statusText),this.buttonloading=!1}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.T),t.Y36(f.M),t.Y36(b.q),t.Y36(r.qu),t.Y36(v.eN),t.Y36(h._W),t.Y36(c.sK),t.Y36(g.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sortie-pays-vers-entrepot"]],decls:149,vars:95,consts:[[1,"container-fluid"],[1,"h3","mb-2","text-gray-800"],[1,"card","shadow","mb-4"],[1,"card-header","py-3"],[1,"m-0","font-weight-bold","text-primary"],["data-bs-toggle","modal","data-bs-target","#addEntreStockModal",1,"btn","btn-primary"],[1,"fa","fa-plus"],[1,"card-body"],[1,"table-responsive"],["datatable","",1,"row-border","hover","table","table-bordered",3,"dtOptions","dtTrigger"],[1,"text-center"],[4,"ngFor","ngForOf"],["id","addEntreStockModal","tabindex","-1","aria-labelledby","addEntreStockModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","addEntreStockModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-danger"],[1,"container"],[1,"col-lg-12","md-12"],[1,"col-md-3"],[1,"form-group"],[1,"mb-3"],["for","paysId"],[2,"color","red"],["formControlName","paysId",3,"placeholder","data","disabled","settings","onDropDownClose","onSelect","onDeSelect"],["for","product"],["formControlName","productId",3,"placeholder","data","disabled","settings","onDropDownClose","onSelect","onDeSelect"],[1,"form-group","mb-3"],["for","quantity"],["type","number","placeholder","15000","id","quantity","formControlName","quantity",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","sortieDate"],["type","date","id","sortieDate","formControlName","sortieDate",1,"form-control",3,"ngClass"],["for","fabDate"],["type","date","id","fabDate","formControlName","fabDate",1,"form-control",3,"ngClass"],["for","expirDate"],["type","date","id","expirDate","formControlName","expirDate",1,"form-control",3,"ngClass"],["for","alertDate"],["type","date","id","alertDate","formControlName","alertDate",1,"form-control",3,"ngClass"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"spinner-border","spinner-border-sm"],[1,"invalid-feedback"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"h6",4)(7,"button",5),t._UZ(8,"i",6),t._uU(9),t.ALo(10,"translate"),t.qZA()()(),t.TgZ(11,"div",7)(12,"div",8)(13,"table",9)(14,"thead")(15,"tr")(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"th"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"th",10),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"th"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"th"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"th"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"th"),t._uU(41),t.ALo(42,"translate"),t.qZA()()(),t.TgZ(43,"tbody"),t.YNc(44,Wt,27,22,"tr",11),t.qZA()()()()()(),t.TgZ(45,"div",12)(46,"div",13)(47,"div",14)(48,"div",15)(49,"h3",16),t._uU(50),t.ALo(51,"translate"),t.qZA(),t._UZ(52,"button",17),t.qZA(),t.TgZ(53,"div",18)(54,"div",19)(55,"div",20)(56,"form",21),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(57,"button",22),t.YNc(58,zt,3,3,"ng-container",23),t.YNc(59,te,1,0,"span",24),t.qZA(),t._uU(60,"\xa0 "),t.TgZ(61,"button",25),t._uU(62),t.ALo(63,"translate"),t.qZA(),t._UZ(64,"br"),t.TgZ(65,"div",26)(66,"div",19)(67,"div",27),t._UZ(68,"br"),t.TgZ(69,"div",19)(70,"div",28)(71,"div",29)(72,"div",30)(73,"div",20)(74,"label",31),t._uU(75),t.ALo(76,"translate"),t.TgZ(77,"span",32),t._uU(78,"*"),t.qZA()()(),t.TgZ(79,"div",20)(80,"ng-multiselect-dropdown",33),t.NdJ("onDropDownClose",function(){return o.onDropDownClose()})("onSelect",function(a){return o.onItemSelect(a)})("onDeSelect",function(a){return o.onItemDeSelect(a)}),t.qZA()()()()(),t.TgZ(81,"div",28)(82,"div",29)(83,"div",30)(84,"div",20)(85,"label",34),t._uU(86),t.ALo(87,"translate"),t.TgZ(88,"span",32),t._uU(89,"*"),t.qZA()()(),t.TgZ(90,"div",20)(91,"ng-multiselect-dropdown",35),t.NdJ("onDropDownClose",function(){return o.onProductDropDownClose()})("onSelect",function(a){return o.onItemProductSelect(a)})("onDeSelect",function(a){return o.onItemProductDeSelect(a)}),t.qZA()()()()(),t.TgZ(92,"div",28)(93,"div",36)(94,"div",20)(95,"label",37),t._uU(96),t.ALo(97,"translate"),t.TgZ(98,"span",32),t._uU(99,"*"),t.qZA()()(),t.TgZ(100,"div",20),t._UZ(101,"input",38),t.YNc(102,oe,2,1,"div",39),t.qZA()()(),t.TgZ(103,"div",28)(104,"div",36)(105,"div",20)(106,"label",40),t._uU(107),t.ALo(108,"translate"),t.TgZ(109,"span",32),t._uU(110,"*"),t.qZA()()(),t.TgZ(111,"div",20),t._UZ(112,"input",41),t.YNc(113,ne,2,1,"div",39),t.qZA()()()(),t.TgZ(114,"div",19)(115,"div",28)(116,"div",36)(117,"div",20)(118,"label",42),t._uU(119),t.ALo(120,"translate"),t.TgZ(121,"span",32),t._uU(122,"*"),t.qZA()()(),t.TgZ(123,"div",20),t._UZ(124,"input",43),t.YNc(125,se,2,1,"div",39),t.qZA()()(),t.TgZ(126,"div",28)(127,"div",36)(128,"div",20)(129,"label",44),t._uU(130),t.ALo(131,"translate"),t.TgZ(132,"span",32),t._uU(133,"*"),t.qZA()()(),t.TgZ(134,"div",20),t._UZ(135,"input",45),t.YNc(136,le,2,1,"div",39),t.qZA()()(),t.TgZ(137,"div",28)(138,"div",36)(139,"div",20)(140,"label",46),t._uU(141),t.ALo(142,"translate"),t.TgZ(143,"span",32),t._uU(144,"*"),t.qZA()()(),t.TgZ(145,"div",20),t._UZ(146,"input",47),t.YNc(147,ue,2,1,"div",39),t.qZA()()()()()(),t._UZ(148,"br"),t.qZA()()()()()()()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,45,"produitpaysversentrepot")),t.xp6(7),t.hij("\xa0",t.lcZ(10,47,"sortiepaysversentrepot")," "),t.xp6(4),t.Q6J("dtOptions",o.dtoptions)("dtTrigger",o.dtTrigger),t.xp6(4),t.Oqu(t.lcZ(18,49,"DateDeSortie")),t.xp6(3),t.Oqu(t.lcZ(21,51,"Paysexpid")),t.xp6(3),t.Oqu(t.lcZ(24,53,"destination")),t.xp6(3),t.Oqu(t.lcZ(27,55,"Produit")),t.xp6(3),t.Oqu(t.lcZ(30,57,"Quantite")),t.xp6(3),t.Oqu(t.lcZ(33,59,"DateFablication")),t.xp6(3),t.Oqu(t.lcZ(36,61,"DatePeremption")),t.xp6(3),t.Oqu(t.lcZ(39,63,"DateAlert")),t.xp6(3),t.Oqu(t.lcZ(42,65,"Action")),t.xp6(3),t.Q6J("ngForOf",o.listStock),t.xp6(6),t.Oqu(t.lcZ(51,67,"sortiepaysversentrepot")),t.xp6(6),t.Q6J("formGroup",o.EntrestockForm),t.xp6(1),t.Q6J("disabled",o.buttonloading),t.xp6(1),t.Q6J("ngIf",!o.buttonloading),t.xp6(1),t.Q6J("ngIf",o.buttonloading),t.xp6(3),t.Oqu(t.lcZ(63,69,"Annuler")),t.xp6(13),t.Oqu(t.lcZ(76,71,"Paysexpid")),t.xp6(5),t.Q6J("placeholder","Select Country")("data",o.listCountry)("disabled",o.disabled)("settings",o.dropdownSettings),t.xp6(6),t.Oqu(t.lcZ(87,73,"NomProduit")),t.xp6(5),t.Q6J("placeholder","Select Product")("data",o.listProducts)("disabled",o.disabled)("settings",o.Settings),t.xp6(5),t.hij("",t.lcZ(97,75,"Quantite")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(85,k,o.submitted&&o.f.quantity.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.quantity.errors),t.xp6(5),t.hij("",t.lcZ(108,77,"DateDeSortie")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(87,k,o.submitted&&o.f.sortieDate.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.sortieDate.errors),t.xp6(6),t.hij("",t.lcZ(120,79,"DateFablication")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(89,k,o.submitted&&o.f.fabDate.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.fabDate.errors),t.xp6(5),t.Oqu(t.lcZ(131,81,"DatePeremption")),t.xp6(5),t.Q6J("ngClass",t.VKq(91,k,o.submitted&&o.f.expirDate.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.expirDate.errors),t.xp6(5),t.hij("",t.lcZ(142,83,"DateAlert")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(93,k,o.submitted&&o.f.alertDate.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.alertDate.errors))},dependencies:[T.OP,u.mk,u.sg,u.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,A.G,u.uU,c.X$]}),i})();const pe=function(i){return["/stock/list-consignation",i]},ge=function(i){return["/accounting/stock-bureau",i]};function me(i,n){if(1&i&&(t.TgZ(0,"tr")(1,"td",9),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",10)(5,"button",11),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"ul",12)(9,"li")(10,"a",13),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"li")(14,"a",13),t._uU(15),t.ALo(16,"translate"),t.qZA()()()()()()),2&i){const e=n.$implicit;t.xp6(2),t.Oqu(e.bureau_name),t.xp6(4),t.hij(" ",t.lcZ(7,6,"choisaction")," "),t.xp6(4),t.Q6J("routerLink",t.VKq(12,pe,e._id)),t.xp6(1),t.Oqu(t.lcZ(12,8,"voirLesconsignation")),t.xp6(3),t.Q6J("routerLink",t.VKq(14,ge,e._id)),t.xp6(1),t.Oqu(t.lcZ(16,10,"VoirStockduBureau"))}}let he=(()=>{class i{constructor(e,o,s){this.agenceService=e,this.toastrService=o,this.translateService=s,this.listBureau=[],this.loading=!0,this.keyLanguage="userLanguage",this.dtoptions={},this.dtTrigger=new S.x,this.translateService.use(localStorage.getItem(this.keyLanguage))}ngOnInit(){this.dtoptions={pagingType:"full_numbers",searching:!0,paging:!0,lengthChange:!0,language:{searchPlaceholder:""}},this.getAllBureau()}getAllBureau(){this.agenceService.getAllBureaux().subscribe({next:e=>{this.listBureau=e.agences,this.dtTrigger.next(null),this.loading=!1},error:e=>{console.log("erreur",e),this.toastrService.error(e.statusText),this.loading=!1}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.q),t.Y36(h._W),t.Y36(c.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-bureau-consignation"]],decls:20,vars:9,consts:[[1,"container-fluid"],[1,"shadow","p-3","mb-5","bg-body","rounded"],[1,"h3","mb-2","text-gray-800"],["routerLink","/stock",1,"btn","btn-outline-primary"],[1,"card","shadow","mb-4"],[1,"card-body"],[1,"table-responsive"],["datatable","",1,"row-border","hover","table","table-bordered",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[2,"cursor","pointer"],[1,"btn-group","dropend"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item",3,"routerLink"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",3),t._uU(6,"back"),t.qZA()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"table",7)(11,"thead")(12,"tr")(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Action"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,me,17,16,"tr",8),t.qZA()()()()()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,5,"DetailConstion")," "),t.xp6(7),t.Q6J("dtOptions",o.dtoptions)("dtTrigger",o.dtTrigger),t.xp6(4),t.Oqu(t.lcZ(15,7,"NomBureau")),t.xp6(5),t.Q6J("ngForOf",o.listBureau))},dependencies:[u.sg,g.rH,A.G,c.X$]}),i})();var _e=m(5439),be=m(8067);function ve(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"a",7),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.imprimer(a._id))}),t._UZ(5,"i",8),t.qZA()()()}if(2&i){const e=n.$implicit;t.xp6(2),t.Oqu(e.date_sortie)}}function Ze(i,n){if(1&i&&(t.TgZ(0,"tr")(1,"td")(2,"div"),t._uU(3),t.qZA()(),t.TgZ(4,"td",10),t._uU(5),t.qZA(),t.TgZ(6,"td",10),t._uU(7),t.qZA(),t.TgZ(8,"td",10),t._uU(9),t.qZA()()),2&i){const e=n.$implicit;t.xp6(3),t.Oqu(e.date_retour),t.xp6(2),t.hij(" ",e.productId.name," "),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",e.agenceId.bureau_name," ")}}function Se(i,n){1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Sauver")))}function Ae(i,n){1&i&&t._UZ(0,"span",43)}function ye(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BureauObligatoire")))}function Te(i,n){if(1&i&&(t.TgZ(0,"div",44),t.YNc(1,ye,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.bureauId.errors.required)}}function qe(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function we(i,n){if(1&i&&(t.TgZ(0,"div",44),t.YNc(1,qe,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.productId.errors.required)}}function xe(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ChampObligatoire")))}function Ce(i,n){if(1&i&&(t.TgZ(0,"div",44),t.YNc(1,xe,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.quantity.errors.required)}}function ke(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DateSortieObligatoire")))}function Ie(i,n){if(1&i&&(t.TgZ(0,"div",44),t.YNc(1,ke,3,3,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.date_sortie.errors.required)}}const O=function(i){return{"is-invalid":i}},Fe=function(i){return["/stock/create-vente-produits-endommages",i]};function Pe(i,n){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"div")(7,"a",47),t._uU(8,"Vendre "),t.qZA()(),t._UZ(9,"div"),t.qZA()()),2&i){const e=n.$implicit;t.xp6(2),t.hij(" ",e.productId.name," "),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(3),t.Q6J("routerLink",t.VKq(3,Fe,e.productId._id))}}function De(i,n){1&i&&(t.ynx(0),t._uU(1,"Enregistrer"),t.BQk())}function Le(i,n){1&i&&t._UZ(0,"span",48)}function Oe(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Nom du produit est Obligatoire"),t.qZA())}function Ne(i,n){if(1&i&&(t.TgZ(0,"div",49),t.YNc(1,Oe,2,0,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.productId.errors.required)}}function Qe(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Origine Obligatoire"),t.qZA())}function Je(i,n){if(1&i&&(t.TgZ(0,"div",49),t.YNc(1,Qe,2,0,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.origine.errors.required)}}function Ee(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Champ Obligatoire"),t.qZA())}function Ye(i,n){if(1&i&&(t.TgZ(0,"div",49),t.YNc(1,Ee,2,0,"div",23),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.entrepot_or_agence.errors.required)}}function Me(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",35)(2,"div",20)(3,"label",44),t._uU(4,"Choisir le bureau "),t.TgZ(5,"span",32),t._uU(6,"*"),t.qZA()()(),t.TgZ(7,"div",20)(8,"ng-multiselect-dropdown",50),t.NdJ("onDropDownClose",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onDropDownOrigineClose())})("onSelect",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onItemOrigineSelect(s))})("onDeSelect",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onItemOrigineDeSelect(s))}),t.qZA(),t.YNc(9,Ye,2,1,"div",34),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(8),t.Q6J("data",e.listData)("disabled",e.disabled)("settings",e.dropdownOrigineSettings),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.entrepot_or_agence.errors)}}function je(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Origine Obligatoire"),t.qZA())}function Ve(i,n){if(1&i&&(t.TgZ(0,"div",49),t.YNc(1,je,2,0,"div",23),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.entrepot_or_agence.errors.required)}}function Be(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",35)(2,"div",20)(3,"label",44),t._uU(4,"Choisir le pays "),t.TgZ(5,"span",32),t._uU(6,"*"),t.qZA()()(),t.TgZ(7,"div",20)(8,"ng-multiselect-dropdown",50),t.NdJ("onDropDownClose",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onDropDownCountryClose())})("onSelect",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onItemCountrySelect(s))})("onDeSelect",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onItemCountryDeSelect(s))}),t.qZA(),t.YNc(9,Ve,2,1,"div",34),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(8),t.Q6J("data",e.listData)("disabled",e.disabled)("settings",e.dropdownCountrySettings),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.entrepot_or_agence.errors)}}function Ke(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Quantit\xe9 Obligatoire"),t.qZA())}function Ge(i,n){if(1&i&&(t.TgZ(0,"div",49),t.YNc(1,Ke,2,0,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.quantity.errors.required)}}function $e(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Origine Obligatoire"),t.qZA())}function Re(i,n){if(1&i&&(t.TgZ(0,"div",49),t.YNc(1,$e,2,0,"div",23),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.motif.errors.required)}}const Xe=function(){return["/stock/vente-produits-endommages"]};function We(i,n){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&i){const e=n.$implicit;t.xp6(2),t.AsE(" ",e.mois.valueMois,"\xa0",e.annee.value," "),t.xp6(2),t.hij(" ",e.productId.name," "),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",e.prix," FCFA ")}}const ze=function(){return["/stock/produits-endommages"]};function eo(i,n){1&i&&(t.ynx(0),t._uU(1,"Enregistrer"),t.BQk())}function oo(i,n){1&i&&t._UZ(0,"span",31)}function io(i,n){if(1&i&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.s9C("value",e._id),t.xp6(1),t.Oqu(e.country_name)}}function no(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Nom du produit est Obligatoire"),t.qZA())}function ro(i,n){if(1&i&&(t.TgZ(0,"div",33),t.YNc(1,no,2,0,"div",12),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.countryId.errors.required)}}function so(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Nom du produit est Obligatoire"),t.qZA())}function ao(i,n){if(1&i&&(t.TgZ(0,"div",33),t.YNc(1,so,2,0,"div",12),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.name.errors.required)}}function lo(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Prix Obligatoire"),t.qZA())}function uo(i,n){if(1&i&&(t.TgZ(0,"div",33),t.YNc(1,lo,2,0,"div",12),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.quantity.errors.required)}}function co(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Quantit\xe9 Obligatoire"),t.qZA())}function po(i,n){if(1&i&&(t.TgZ(0,"div",33),t.YNc(1,co,2,0,"div",12),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.quantity.errors.required)}}const go=function(){return["/stock/produits-endommages"]},mo=function(){return["/stock/vente-produits-endommages"]},ho=[{path:"",component:Q},{path:"product",component:G},{path:"mouvement",component:st},{path:"mouvement-pays-entrepot",component:ce},{path:"bureau-consignation",component:he},{path:"list-consignation/:id",component:(()=>{class i{constructor(e,o,s,a,l,d,p){this.route=e,this.agenceService=o,this.stockService=s,this.salaireService=a,this.productService=l,this.toastrService=d,this.translateService=p,this.listconsignation=[],this.loading=!0,this.keyLanguage="userLanguage",this.dtoptions={},this.dtTrigger=new S.x,this.columns=["NOM DU PRODUIT","QUANTITE"],this.rows=[],this.dataRows=[],this.translateService.use(localStorage.getItem(this.keyLanguage))}ngOnInit(){this.getAllConsignation(),this.getBureau(),this.dtoptions={pagingType:"full_numbers",searching:!0,paging:!0,lengthChange:!0,language:{searchPlaceholder:""}}}getAllConsignation(){this.id=this.route.snapshot.paramMap.get("id"),this.stockService.getAllconsignation(this.id).subscribe({next:e=>{this.listconsignation=e,this.dtTrigger.next(null)},error:e=>{console.log(e),this.loading=!1}})}getBureau(){this.id=this.route.snapshot.paramMap.get("id"),console.log(this.id),this.agenceService.singleBureau(this.id).subscribe({next:e=>{this.agence=e.findagence.bureau_name,this.bureauId=e._id,console.log(e),this.loading=!1},error:e=>{console.log("erreur",e),this.toastrService.error(e.statusText),this.loading=!1}})}imprimer(e){this.stockService.getsingleconsignation(e).subscribe(s=>{console.log(s),this.rows=s.response,this.datedu=_e(s.date_sortie).format("DD/MM/yyyy"),console.log("rows",this.rows),this.impressionPDF()})}impressionPDF(){const e=new D.jsPDF;var o=new Image;return o.src="assets/logotsw.png",e.addImage(o.src,30,20,10,10),y()(e,{body:[[{content:"\n",styles:{halign:"left"}}]],theme:"plain"}),y()(e,{body:[[{content:"TOTAL SUCCESS WORLD-TSW\nMarcory Cit\xe9 Hibiscus Villa 189\nBP 3450 Abidjan 10\nT\xe9l: 2721261411/0554543098\nSite web: www.tswintl.com",styles:{halign:"left"}},{content:`Stock du bureau ${this.agence}\n\nBorderau de consignation du: ${this.datedu}\n`,styles:{halign:"right",fontSize:20}}]],theme:"plain"}),y()(e,{head:[this.columns],body:this.rows,theme:"plain",styles:{halign:"center"},headStyles:{fillColor:[124,95,240]},alternateRowStyles:{fillColor:[231,215,252]},tableLineColor:[124,95,240],tableLineWidth:.1}),e.save("consignation.pdf")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.gz),t.Y36(x.q),t.Y36(b.q),t.Y36(be.o),t.Y36(f.M),t.Y36(h._W),t.Y36(c.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-consignation-list"]],decls:17,vars:10,consts:[[1,"container-fluid"],[1,"h3","mb-2","text-gray-800"],[1,"card","shadow","mb-4"],[1,"card-body"],[1,"table-responsive"],["datatable","",1,"row-border","hover","table","table-bordered",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-print"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"table",5)(8,"thead")(9,"tr")(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Action"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,ve,6,1,"tr",6),t.qZA()()()()()()),2&e&&(t.xp6(2),t.AsE(" ",t.lcZ(3,6,"DetailConstion")," ",o.agence," "),t.xp6(5),t.Q6J("dtOptions",o.dtoptions)("dtTrigger",o.dtTrigger),t.xp6(4),t.Oqu(t.lcZ(12,8,"DateSortie")),t.xp6(5),t.Q6J("ngForOf",o.listconsignation))},dependencies:[u.sg,A.G,c.X$]}),i})()},{path:"retour-product",component:(()=>{class i{constructor(e,o,s,a,l,d){this.fb=e,this.toastrService=o,this.agenceService=s,this.productService=a,this.stockService=l,this.translateService=d,this.listBureau=[],this.listProducts=[],this.listMouvementStock=[],this.submitted=!1,this.loading=!0,this.buttonloading=!1,this.disabled=!1,this.limitSelection=!1,this.limitShow=!1,this.ShowFilter=!0,this.showAll=!0,this.dropdownSettings={},this.dropdownProductSettings={},this.Settings={},this.dtoptions={},this.dtTrigger=new S.x,this.subscribers=new Array,this.keysList=[],this.itemList=[],this.sale=new P,this.templist=[],this.productList=[],this.selectproductList=[],this.salePrdoucts=[],this.keyLanguage="userLanguage",this.selectedItem=[],this.totalPrice=0,this.subTotal=0,this.vat=0,this.translateService.use(localStorage.getItem(this.keyLanguage)),this.mvmtstockbackForm=this.fb.group({bureauId:["",r.kI.required],productId:["",r.kI.required],quantity:["",r.kI.required],date_sortie:["",r.kI.required]})}ngOnInit(){this.getAllBureau(),this.getallMvmtStock(),this.getAllProducts(),this.dropdownSettings={singleSelection:!0,defaultOpen:!1,idField:"_id",textField:"bureau_name",tooltipField:"item_tooltip",enableCheckAll:this.showAll,itemsShowLimit:999999,allowSearchFilter:this.ShowFilter},this.dropdownProductSettings={singleSelection:!0,defaultOpen:!1,idField:"_id",textField:"name",tooltipField:"item_tooltip",enableCheckAll:this.showAll,itemsShowLimit:999999,allowSearchFilter:this.ShowFilter},this.dtoptions={pagingType:"full_numbers",searching:!0,paging:!0,lengthChange:!0,language:{searchPlaceholder:""}}}get f(){return this.mvmtstockbackForm.controls}onSubmit(){var e=this;return(0,Z.Z)(function*(){e.submitted=!0,e.mvmtstockbackForm?.invalid||e.stockService.registerMvtStockAgencePays({agenceId:e.mvmtstockbackForm.value.bureauId[0]._id,productId:e.mvmtstockbackForm.value.productId[0]._id,date_retour:e.mvmtstockbackForm.value.date_sortie,quantity:e.mvmtstockbackForm.value.quantity}).subscribe({next:s=>{e.toastrService.success("Enregistrement effectu\xe9 avec succ\xe8s!"),e.loading=!1,window.location.reload()},error:s=>{console.log("erreur",s),e.toastrService.error(s.statusText),e.loading=!1}})})()}getAllBureau(){var e=this;return(0,Z.Z)(function*(){e.agenceService.getAllBureauxForMvt().subscribe({next:o=>{e.listBureau=o,console.log("Bureaux",e.listBureau),e.loading=!1},error:o=>{console.log("erreur",o),e.toastrService.error(o.statusText),e.loading=!1}})})()}getallMvmtStock(){this.stockService.getAllMvtStockAgencePays().subscribe({next:e=>{this.listMouvementStock=e,this.dtTrigger.next(null),console.log(this.listMouvementStock),this.loading=!1},error:e=>{console.log(e),this.toastrService.error(e.statusText),this.loading=!1}})}getAllProducts(){this.productService.getAllProducts().subscribe({next:e=>{this.productList=e,this.loading=!1},error:e=>{console.log(e),this.toastrService.error(e.statusText),this.loading=!1}})}onItemSelect(e){}onItemDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.mvmtstockbackForm.value)}onDropDownClose(){console.log("dropdown closed")}toogleShowAll(){this.showAll=!this.showAll,this.dropdownSettings=Object.assign({},this.dropdownSettings,{enableCheckAll:this.showAll})}toogleShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownSettings=Object.assign({},this.dropdownSettings,{allowSearchFilter:this.ShowFilter})}onItemProductSelect(e){console.log("onItemSelect",e),console.log("form model",this.mvmtstockbackForm.value)}onItemProductDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.mvmtstockbackForm.value)}onDropDownProductClose(){console.log("dropdown closed")}toogleProductShowAll(){this.showAll=!this.showAll,this.dropdownProductSettings=Object.assign({},this.dropdownProductSettings,{enableCheckAll:this.showAll})}toogleProductShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownProductSettings=Object.assign({},this.dropdownProductSettings,{allowSearchFilter:this.ShowFilter})}onDeleteMvtStock(e){window.confirm(`\xcates-vous s\xfbr de vouloir supprimer ${e} ?`)&&this.stockService.deletemvtStock(e).subscribe({next:o=>{console.log(o),this.toastrService.success(o),window.location.reload()},error:o=>{console.log(o),this.toastrService.error(o.error.message),this.buttonloading=!1}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.qu),t.Y36(h._W),t.Y36(x.q),t.Y36(f.M),t.Y36(b.q),t.Y36(c.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-retourproduit-stock"]],decls:101,vars:59,consts:[[1,"container-fluid"],[1,"h3","mb-2","text-gray-800"],[1,"card","shadow","mb-4"],[1,"card-header","py-3"],[1,"m-0","font-weight-bold","text-primary"],["data-bs-toggle","modal","data-bs-target","#addSortieStockModal",1,"btn","btn-primary"],[1,"fa","fa-plus"],[1,"card-body"],[1,"table-responsive"],["datatable","",1,"row-border","hover","table","table-bordered",3,"dtOptions","dtTrigger"],[1,"text-center"],[4,"ngFor","ngForOf"],["id","addSortieStockModal","tabindex","-1","aria-labelledby","addSortieStockModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","addSortieStockModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-danger"],[1,"container"],[1,"card"],[1,"col-lg-3","col-md-3"],[1,"form-group"],[1,"mb-3"],[1,"col-md-3"],["for","bureau"],[2,"color","red"],[1,"col-md-9"],["formControlName","bureauId",3,"data","disabled","settings","onDropDownClose","onSelect","onDeSelect"],["class","invalid-feedback",4,"ngIf"],["for","productId"],["formControlName","productId",3,"data","disabled","settings","onDropDownClose","onSelect","onDeSelect"],["for","quantity"],["type","number","min","0","id","quantity","formControlName","quantity",1,"form-control",3,"ngClass"],["for","date_sortie"],["type","date","id","date_sortie","formControlName","date_sortie",1,"form-control",3,"ngClass"],[1,"spinner-border","spinner-border-sm"],[1,"invalid-feedback"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2)(5,"div",3)(6,"h6",4)(7,"button",5),t._UZ(8,"i",6),t._uU(9),t.ALo(10,"translate"),t.qZA()()(),t.TgZ(11,"div",7)(12,"div",8)(13,"table",9)(14,"thead")(15,"tr")(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",10),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"th"),t._uU(26),t.ALo(27,"translate"),t.qZA()()(),t.TgZ(28,"tbody"),t.YNc(29,Ze,10,4,"tr",11),t.qZA()()()()()(),t.TgZ(30,"div",12)(31,"div",13)(32,"div",14)(33,"div",15)(34,"h3",16),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"button",17),t.qZA(),t.TgZ(38,"div",18)(39,"div",19)(40,"div",20)(41,"form",21),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(42,"button",22),t.YNc(43,Se,3,3,"ng-container",23),t.YNc(44,Ae,1,0,"span",24),t.qZA(),t._uU(45,"\xa0 "),t.TgZ(46,"button",25),t._uU(47),t.ALo(48,"translate"),t.qZA(),t._UZ(49,"br"),t.TgZ(50,"div",26)(51,"div",27)(52,"div",19)(53,"div",28)(54,"div",29)(55,"div",30)(56,"div",31)(57,"label",32),t._uU(58),t.ALo(59,"translate"),t.TgZ(60,"span",33),t._uU(61,"*"),t.qZA()()(),t.TgZ(62,"div",34)(63,"ng-multiselect-dropdown",35),t.NdJ("onDropDownClose",function(){return o.onDropDownClose()})("onSelect",function(a){return o.onItemSelect(a)})("onDeSelect",function(a){return o.onItemDeSelect(a)}),t.qZA(),t.YNc(64,Te,2,1,"div",36),t.qZA()()()(),t.TgZ(65,"div",28)(66,"div",29)(67,"div",30)(68,"div",31)(69,"label",37),t._uU(70),t.ALo(71,"translate"),t.TgZ(72,"span",33),t._uU(73,"*"),t.qZA()()(),t.TgZ(74,"div",34)(75,"ng-multiselect-dropdown",38),t.NdJ("onDropDownClose",function(){return o.onDropDownProductClose()})("onSelect",function(a){return o.onItemProductSelect(a)})("onDeSelect",function(a){return o.onItemProductDeSelect(a)}),t.qZA(),t.YNc(76,we,2,1,"div",36),t.qZA()()()(),t.TgZ(77,"div",28)(78,"div",29)(79,"div",30)(80,"div",31)(81,"label",39),t._uU(82),t.ALo(83,"translate"),t.TgZ(84,"span",33),t._uU(85,"*"),t.qZA()()(),t.TgZ(86,"div",34),t._UZ(87,"input",40),t.YNc(88,Ce,2,1,"div",36),t.qZA()()()(),t.TgZ(89,"div",28)(90,"div",29)(91,"div",30)(92,"div",31)(93,"label",41),t._uU(94),t.ALo(95,"translate"),t.TgZ(96,"span",33),t._uU(97,"*"),t.qZA()()(),t.TgZ(98,"div",34),t._UZ(99,"input",42),t.YNc(100,Ie,2,1,"div",36),t.qZA()()()()()()()()()()()()()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,31,"GestionProduits")),t.xp6(7),t.hij("\xa0",t.lcZ(10,33,"retoutDeStock")," "),t.xp6(4),t.Q6J("dtOptions",o.dtoptions)("dtTrigger",o.dtTrigger),t.xp6(4),t.Oqu(t.lcZ(18,35,"DateSortie")),t.xp6(3),t.Oqu(t.lcZ(21,37,"Produit")),t.xp6(3),t.Oqu(t.lcZ(24,39,"Quantite")),t.xp6(3),t.Oqu(t.lcZ(27,41,"Bureau")),t.xp6(3),t.Q6J("ngForOf",o.listMouvementStock),t.xp6(6),t.Oqu(t.lcZ(36,43,"retoutDeStock")),t.xp6(6),t.Q6J("formGroup",o.mvmtstockbackForm),t.xp6(1),t.Q6J("disabled",o.buttonloading),t.xp6(1),t.Q6J("ngIf",!o.buttonloading),t.xp6(1),t.Q6J("ngIf",o.buttonloading),t.xp6(3),t.Oqu(t.lcZ(48,45,"Annuler")),t.xp6(11),t.Oqu(t.lcZ(59,47,"Bureau")),t.xp6(5),t.Q6J("data",o.listBureau)("disabled",o.disabled)("settings",o.dropdownSettings),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.bureauId.errors),t.xp6(6),t.Oqu(t.lcZ(71,49,"Produit")),t.xp6(5),t.Q6J("data",o.productList)("disabled",o.disabled)("settings",o.dropdownProductSettings),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.productId.errors),t.xp6(6),t.Oqu(t.lcZ(83,51,"Quantite")),t.xp6(5),t.Q6J("ngClass",t.VKq(55,O,o.submitted&&o.f.quantity.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.quantity.errors),t.xp6(6),t.Oqu(t.lcZ(95,53,"DateSortie")),t.xp6(5),t.Q6J("ngClass",t.VKq(57,O,o.submitted&&o.f.date_sortie.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.date_sortie.errors))},dependencies:[T.OP,u.mk,u.sg,u.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.sg,r.u,A.G,c.X$]}),i})()},{path:"entree-stock",component:At},{path:"international-stock",component:qt},{path:"stock-pays-international/:id",component:Nt},{path:"national-stock",component:xt},{path:"edit-product/:id",component:Lt},{path:"stock-alert",component:Bt},{path:"stock-alert-pays-edit/:id",component:Ht},{path:"produits-endommages",component:(()=>{class i{constructor(e,o,s,a,l,d,p,_){this.agenceService=e,this.countryService=o,this.productService=s,this.stockService=a,this.fb=l,this.http=d,this.toastrService=p,this.translateService=_,this.submitted=!1,this.listProducts=[],this.listProductsendo=[],this.pageNumber=1,this.nom="",this.loading=!0,this.buttonloading=!1,this.listData=[],this.listBureau=[],this.disabled=!1,this.limitSelection=!1,this.limitShow=!1,this.ShowFilter=!0,this.showAll=!0,this.dropdownSettings={},this.dropdownProductSettings={},this.dropdownOrigineSettings={},this.dropdownCountrySettings={},this.myDate=new Date,this.dtoptions={},this.dtTrigger=new S.x,this.keyLanguage="userLanguage",this.productendomageForm=new r.cw({productId:new r.NI(""),origine:new r.NI(""),entrepot_or_agence:new r.NI(""),motif:new r.NI(""),quantity:new r.NI("")}),this.translateService.use(localStorage.getItem(this.keyLanguage)),this.productendomageForm=this.fb.group({productId:["",r.kI.required],origine:["",r.kI.required],entrepot_or_agence:["",r.kI.required],motif:["",r.kI.required],quantity:["",r.kI.required]})}ngOnInit(){this.dtoptions={pagingType:"full_numbers",searching:!0,paging:!0,lengthChange:!0,language:{searchPlaceholder:""}},this.getAllProducts(),this.getProducts(),this.dropdownProductSettings={singleSelection:!0,defaultOpen:!1,idField:"_id",textField:"name",tooltipField:"item_tooltip",enableCheckAll:this.showAll,itemsShowLimit:999999,allowSearchFilter:this.ShowFilter},this.dropdownOrigineSettings={singleSelection:!0,defaultOpen:!1,idField:"_id",textField:"bureau_name",tooltipField:"item_tooltip",enableCheckAll:this.showAll,itemsShowLimit:999999,allowSearchFilter:this.ShowFilter},this.dropdownCountrySettings={singleSelection:!0,defaultOpen:!1,idField:"_id",textField:"country_name",tooltipField:"item_tooltip",enableCheckAll:this.showAll,itemsShowLimit:999999,allowSearchFilter:this.ShowFilter}}get f(){return this.productendomageForm.controls}onSubmit(){if(this.submitted=!0,console.log("form test ==>",this.productendomageForm),this.productendomageForm.invalid)return;this.buttonloading=!0;const e={productId:this.productendomageForm.value.productId[0]._id,origine:this.productendomageForm.value.origine,entrepot_or_agence:this.productendomageForm.value.entrepot_or_agence[0]._id,motif:this.productendomageForm.value.motif,quantity:this.productendomageForm.value.quantity};console.log("formData",e),this.productService.registerProductEndomage(e).subscribe({next:o=>{console.log(o),this.toastrService.success("Succ\xe8s d'enregistremment !"),this.buttonloading=!1},error:o=>{console.log(o),this.toastrService.error(o.error.message),this.buttonloading=!1}})}getAllProducts(){this.productService.getAllProductsEndomages().subscribe({next:e=>{this.listProductsendo=e,console.log(this.listProducts),this.totalProducts=e.length,this.dtTrigger.next(null),this.loading=!1},error:e=>{console.log(e),this.loading=!1}})}getProducts(){this.productService.getAllProducts().subscribe({next:e=>{this.listProducts=e,console.log(this.listProducts[2]),this.totalProducts=e.length,this.dtTrigger.next(null),this.loading=!1},error:e=>{console.log(e),this.loading=!1}})}onItemSelect(e){console.log("onItemSelect",e),this.origineselectionnee=e.value,console.log(this.origineselectionnee),console.log("form",this.productendomageForm.value),"bureau"==e.value?this.agenceService.getAllBureaux().subscribe({next:o=>{this.listData=o.agences,this.loading=!1},error:o=>{console.log(o),this.loading=!1}}):"entrep\xf4t national"==e.target.value&&this.countryService.getAllCountriesciv().subscribe({next:o=>{this.listData=o,this.loading=!1},error:o=>{console.log(o),this.loading=!1}})}onItemOrigineSelect(e){console.log("onItemSelect",e),console.log("form model",this.productendomageForm.value)}onItemOrigineDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.productendomageForm.value)}onDropDownOrigineClose(){console.log("dropdown closed")}toogleOrigineShowAll(){this.showAll=!this.showAll,this.dropdownOrigineSettings=Object.assign({},this.dropdownOrigineSettings,{enableCheckAll:this.showAll})}toogleOrigineShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownOrigineSettings=Object.assign({},this.dropdownOrigineSettings,{allowSearchFilter:this.ShowFilter})}onItemProductSelect(e){console.log("onItemSelect",e),console.log("form model",this.productendomageForm.value)}onItemProductDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.productendomageForm.value)}onDropDownProductClose(){console.log("dropdown closed")}toogleProductShowAll(){this.showAll=!this.showAll,this.dropdownProductSettings=Object.assign({},this.dropdownProductSettings,{enableCheckAll:this.showAll})}toogleProductShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownProductSettings=Object.assign({},this.dropdownProductSettings,{allowSearchFilter:this.ShowFilter})}onItemCountrySelect(e){console.log("onItemSelect",e),console.log("form model",this.productendomageForm.value)}onItemCountryDeSelect(e){console.log("onItem DeSelect",e),console.log("form model",this.productendomageForm)}onDropDownCountryClose(){console.log("dropdown closed"),console.log("form model",this.productendomageForm.value)}toogleCountryShowAll(){this.showAll=!this.showAll,this.dropdownCountrySettings=Object.assign({},this.dropdownCountrySettings,{enableCheckAll:this.showAll})}toogleCountryShowFilter(){this.ShowFilter=!this.ShowFilter,this.dropdownCountrySettings=Object.assign({},this.dropdownCountrySettings,{allowSearchFilter:this.ShowFilter})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.q),t.Y36(q.T),t.Y36(f.M),t.Y36(b.q),t.Y36(r.qu),t.Y36(v.eN),t.Y36(h._W),t.Y36(c.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-produits-endommages"]],decls:103,vars:18,consts:[[1,"container-fluid"],[1,"h3","mb-2","text-gray-800"],[1,"card","shadow","mb-4"],[1,"card-header","py-3"],[1,"m-0","font-weight-bold","text-primary"],["data-bs-toggle","modal","data-bs-target","#addProductModal",1,"btn","btn-primary"],[1,"fa","fa-plus"],[1,"btn","btn-primary",3,"routerLink"],[1,"card-body"],[1,"table-responsive"],["datatable","",1,"row-border","hover","table","table-bordered",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],["id","addProductModal","tabindex","-1","aria-labelledby","addProductModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","addProductModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-danger"],[1,"container"],[1,"col-lg-12","md-12"],[1,"col-md-3"],[1,"form-group"],[1,"mb-3"],["for","product"],[2,"color","red"],["formControlName","productId",3,"data","disabled","settings","onDropDownClose","onSelect","onDeSelect"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","mb-3"],["for","origine"],["formControlName","origine","id","origine",1,"form-control",3,"change"],["value",""],["value","bureau"],["value","entrep\xf4t national"],["value","entrep\xf4t international"],["class","col-md-3",4,"ngIf","ngIfElse"],["esleBlock",""],["for","price"],["type","number","min","0","formControlName","quantity",1,"form-control"],["type","text","min","0","formControlName","motif",1,"form-control"],[1,"btn","btn-success","shadow-sm","p-3","mb-5","bg-white","rounded",3,"routerLink"],[1,"spinner-border","spinner-border-sm"],[1,"invalid-feedback"],["formControlName","entrepot_or_agence",3,"data","disabled","settings","onDropDownClose","onSelect","onDeSelect"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Produits exceptionnels"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"h6",4)(6,"button",5),t._UZ(7,"i",6),t._uU(8,"\xa0Ajouter \xa0 "),t.qZA(),t._uU(9,"\xa0 "),t.TgZ(10,"a",7),t._UZ(11,"i",6),t._uU(12,"\xa0Voir les ventes "),t.qZA()()(),t.TgZ(13,"div",8)(14,"div",9)(15,"table",10)(16,"thead")(17,"tr")(18,"th"),t._uU(19,"Nom du produit"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Quantit\xe9 Disponible"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Action"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,Pe,10,5,"tr",11),t.qZA()()()()()(),t.TgZ(26,"div",12)(27,"div",13)(28,"div",14)(29,"div",15)(30,"h3",16),t._uU(31,"Ajouter Produit endommag\xe9"),t.qZA(),t._UZ(32,"button",17),t.qZA(),t.TgZ(33,"div",18)(34,"div",19)(35,"div",20)(36,"form",21),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(37,"button",22),t.YNc(38,De,2,0,"ng-container",23),t.YNc(39,Le,1,0,"span",24),t.qZA(),t._uU(40," \xa0 "),t.TgZ(41,"button",25),t._uU(42,"Annuler"),t.qZA(),t._UZ(43,"br"),t.TgZ(44,"div",26)(45,"div",19)(46,"div",27),t._UZ(47,"br"),t.TgZ(48,"div",19)(49,"div",28)(50,"div",29)(51,"div",30)(52,"div",20)(53,"label",31),t._uU(54," Nom du Produit"),t.TgZ(55,"span",32),t._uU(56,"*"),t.qZA()()(),t.TgZ(57,"div",20)(58,"ng-multiselect-dropdown",33),t.NdJ("onDropDownClose",function(){return o.onDropDownProductClose()})("onSelect",function(a){return o.onItemProductSelect(a)})("onDeSelect",function(a){return o.onItemProductDeSelect(a)}),t.qZA(),t.YNc(59,Ne,2,1,"div",34),t.qZA()()()(),t.TgZ(60,"div",28)(61,"div",35)(62,"div",20)(63,"label",36),t._uU(64,"Origine "),t.TgZ(65,"span",32),t._uU(66,"*"),t.qZA()()(),t.TgZ(67,"div",20)(68,"select",37),t.NdJ("change",function(a){return o.onItemSelect(a.target)}),t.TgZ(69,"option",38),t._uU(70,"Selectionne l'origine du produit"),t.qZA(),t.TgZ(71,"option",39),t._uU(72,"Bureau"),t.qZA(),t.TgZ(73,"option",40),t._uU(74,"Entrep\xf4t national"),t.qZA(),t.TgZ(75,"option",41),t._uU(76,"Entrep\xf4t international"),t.qZA()(),t.YNc(77,Je,2,1,"div",34),t.qZA()()(),t.YNc(78,Me,10,4,"div",42),t.YNc(79,Be,10,4,"ng-template",null,43,t.W1O),t.TgZ(81,"div",28)(82,"div",35)(83,"div",20)(84,"label",44),t._uU(85,"Quantit\xe9 "),t.TgZ(86,"span",32),t._uU(87,"*"),t.qZA()()(),t.TgZ(88,"div",20),t._UZ(89,"input",45),t.YNc(90,Ge,2,1,"div",34),t.qZA()()()(),t.TgZ(91,"div",19)(92,"div",28)(93,"div",35)(94,"div",20)(95,"label",44),t._uU(96,"Motif "),t.TgZ(97,"span",32),t._uU(98,"*"),t.qZA()()(),t.TgZ(99,"div",20),t._UZ(100,"input",46),t.YNc(101,Re,2,1,"div",34),t.qZA()()()()()(),t._UZ(102,"br"),t.qZA()()()()()()()()),2&e){const s=t.MAs(80);t.xp6(10),t.Q6J("routerLink",t.DdM(17,Xe)),t.xp6(5),t.Q6J("dtOptions",o.dtoptions)("dtTrigger",o.dtTrigger),t.xp6(10),t.Q6J("ngForOf",o.listProductsendo),t.xp6(11),t.Q6J("formGroup",o.productendomageForm),t.xp6(1),t.Q6J("disabled",o.buttonloading),t.xp6(1),t.Q6J("ngIf",!o.buttonloading),t.xp6(1),t.Q6J("ngIf",o.buttonloading),t.xp6(19),t.Q6J("data",o.listProducts)("disabled",o.disabled)("settings",o.dropdownProductSettings),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.productId.errors),t.xp6(18),t.Q6J("ngIf",o.submitted&&o.f.origine.errors),t.xp6(1),t.Q6J("ngIf","bureau"===o.origineselectionnee)("ngIfElse",s),t.xp6(12),t.Q6J("ngIf",o.submitted&&o.f.quantity.errors),t.xp6(11),t.Q6J("ngIf",o.submitted&&o.f.motif.errors)}},dependencies:[T.OP,u.sg,u.O5,g.rH,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.qQ,r.sg,r.u,A.G]}),i})()},{path:"vente-produits-endommages",component:(()=>{class i{constructor(e,o,s,a,l,d,p,_){this.agenceService=e,this.countryService=o,this.productService=s,this.stockService=a,this.fb=l,this.http=d,this.toastrService=p,this.translateService=_,this.listProductsvendus=[],this.pageNumber=1,this.nom="",this.loading=!0,this.buttonloading=!1,this.myDate=new Date,this.dtoptions={},this.dtTrigger=new S.x,this.keyLanguage="userLanguage",this.translateService.use(localStorage.getItem(this.keyLanguage))}ngOnInit(){this.dtoptions={pagingType:"full_numbers",searching:!0,paging:!0,lengthChange:!0,language:{searchPlaceholder:""}},this.getAllProducts()}getAllProducts(){this.productService.getAllVenteProductsEndomages().subscribe({next:e=>{this.listProductsvendus=e,console.log(this.listProductsvendus),this.totalProducts=e.length,this.dtTrigger.next(null),this.loading=!1},error:e=>{console.log(e),this.loading=!1}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.q),t.Y36(q.T),t.Y36(f.M),t.Y36(b.q),t.Y36(r.qu),t.Y36(v.eN),t.Y36(h._W),t.Y36(c.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-vente-produits-endommages"]],decls:25,vars:5,consts:[[1,"container-fluid"],[1,"h3","mb-2","text-gray-800"],[1,"card","shadow","mb-4"],[1,"card-header","py-3"],[1,"m-0","font-weight-bold","text-primary"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa","fa-plus"],[1,"card-body"],[1,"table-responsive"],["datatable","",1,"row-border","hover","table","table-bordered",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Produits exceptionnels"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"h6",4)(6,"a",5),t._UZ(7,"i",6),t._uU(8,"\xa0Ajouter \xa0 "),t.qZA(),t._uU(9,"\xa0 "),t.qZA()(),t.TgZ(10,"div",7)(11,"div",8)(12,"table",9)(13,"thead")(14,"tr")(15,"th"),t._uU(16,"Date"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Nom du produit"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Quantit\xe9"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Prix de vente"),t.qZA()()(),t.TgZ(23,"tbody"),t.YNc(24,We,9,5,"tr",10),t.qZA()()()()()()),2&e&&(t.xp6(6),t.Q6J("routerLink",t.DdM(4,ze)),t.xp6(6),t.Q6J("dtOptions",o.dtoptions)("dtTrigger",o.dtTrigger),t.xp6(12),t.Q6J("ngForOf",o.listProductsvendus))},dependencies:[u.sg,g.rH,A.G]}),i})()},{path:"create-vente-produits-endommages/:id",component:(()=>{class i{constructor(e,o,s,a,l,d,p){this.fb=e,this.http=o,this.route=s,this.router=a,this.productService=l,this.toastrService=d,this.translateService=p,this.countries=[],this.keyLanguage="userLanguage",this.loading=!0,this.buttonloading=!1,this.selectedItems=[],this.RoleselectedItems=[],this.day=(new Date).getDay(),this.month=(new Date).getMonth(),this.year=(new Date).getFullYear(),this.submitted=!1,this.translateService.use(localStorage.getItem(this.keyLanguage)),this.createventeproducForm=this.fb.group({countryId:["",r.kI.required],name:["",r.kI.required],prix:["",r.kI.required],quantity:["",r.kI.required]})}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");this.productService.getSingleProductEndomage(e).subscribe(o=>{this.max=o.quantity,console.log("max",o.quantity),this.name=o.productId.name,this.createventeproducForm.patchValue({name:o.productId.name})}),this.getallCountry()}getallCountry(){const o=new Date(this.year,this.month,this.day).toLocaleString("default",{month:"long"});console.log(o,this.year),this.productService.getcurrentmonth(o).subscribe(a=>{this.mois=a._id}),this.productService.getcurrentyear(this.year).subscribe(a=>{this.annee=a._id});const s=JSON.parse(localStorage.getItem("currentUser"));this.countries=s.role.countryId,console.log("countries",this.countries)}get f(){return this.createventeproducForm.controls}onSubmit(){if(this.route.snapshot.paramMap.get("id"),console.log(this.day,this.year),this.submitted=!0,this.createventeproducForm?.invalid)return;const o={mois:this.mois,annee:this.annee,countryId:this.createventeproducForm.value.countryId,productId:this.route.snapshot.paramMap.get("id"),prix:this.createventeproducForm.value.prix,quantity:this.createventeproducForm.value.quantity};console.log("dataForm",o),this.productService.createventeProductEndomage(o).subscribe({next:s=>{this.toastrService.success("Les informations enregistr\xe9e!"),this.buttonloading=!1,this.router.navigate(["/stock/vente-produits-endommages"])},error:s=>{console.log(s),this.toastrService.error(s.error.message),this.buttonloading=!1}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.qu),t.Y36(v.eN),t.Y36(g.gz),t.Y36(g.F0),t.Y36(f.M),t.Y36(h._W),t.Y36(c.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-vente-produits-endommages"]],decls:75,vars:14,consts:[[1,"container-fluid"],[1,"h3","mb-2","text-gray-800"],[1,"card","shadow","mb-4"],[1,"card-header","py-3"],[1,"m-0","font-weight-bold","text-primary"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa","fa-plus"],[1,"card-body"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-danger"],[1,"container"],[1,"col-lg-12","md-12"],[1,"col-md-3"],[1,"form-group"],[1,"mb-3"],["for","product"],[2,"color","red"],["formControlName","countryId","id","",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["formControlName","name",1,"form-control"],[1,"form-group","mb-3"],["for","price"],["type","number","min","0","formControlName","prix",1,"form-control"],["type","number","min","0","formControlName","quantity",1,"form-control",3,"max"],[1,"spinner-border","spinner-border-sm"],[3,"value"],[1,"invalid-feedback"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Produits exceptionnels"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"h6",4)(6,"a",5),t._UZ(7,"i",6),t._uU(8,"\xa0Fermer \xa0 "),t.qZA(),t._uU(9,"\xa0 "),t.TgZ(10,"a",5),t._UZ(11,"i",6),t._uU(12,"\xa0Voir les ventes "),t.qZA()()(),t.TgZ(13,"div",7)(14,"div",8)(15,"div",9)(16,"form",10),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(17,"button",11),t.YNc(18,eo,2,0,"ng-container",12),t.YNc(19,oo,1,0,"span",13),t.qZA(),t._uU(20," \xa0 "),t.TgZ(21,"button",14),t._uU(22,"Annuler"),t.qZA(),t._UZ(23,"br"),t.TgZ(24,"div",15)(25,"div",8)(26,"div",16),t._UZ(27,"br"),t.TgZ(28,"div",8)(29,"div",17)(30,"div",18)(31,"div",19)(32,"div",9)(33,"label",20),t._uU(34,"Pays"),t.TgZ(35,"span",21),t._uU(36,"*"),t.qZA()()(),t.TgZ(37,"div",9)(38,"select",22)(39,"option",23),t._uU(40,"Selectionner le pays"),t.qZA(),t.YNc(41,io,2,2,"option",24),t.qZA(),t.YNc(42,ro,2,1,"div",25),t.qZA()()()(),t.TgZ(43,"div",17)(44,"div",18)(45,"div",19)(46,"div",9)(47,"label",20),t._uU(48," Nom du Produit"),t.TgZ(49,"span",21),t._uU(50,"*"),t.qZA()()(),t.TgZ(51,"div",9),t._UZ(52,"input",26),t.YNc(53,ao,2,1,"div",25),t.qZA()()()(),t.TgZ(54,"div",17)(55,"div",27)(56,"div",9)(57,"label",28),t._uU(58,"Prix de vente "),t.TgZ(59,"span",21),t._uU(60,"*"),t.qZA()()(),t.TgZ(61,"div",9),t._UZ(62,"input",29),t.YNc(63,uo,2,1,"div",25),t.qZA()()(),t.TgZ(64,"div",17)(65,"div",27)(66,"div",9)(67,"label",28),t._uU(68,"Quantit\xe9 "),t.TgZ(69,"span",21),t._uU(70,"*"),t.qZA()()(),t.TgZ(71,"div",9),t._UZ(72,"input",30),t.YNc(73,po,2,1,"div",25),t.qZA()()()()()(),t._UZ(74,"br"),t.qZA()()()()()()()),2&e&&(t.xp6(6),t.Q6J("routerLink",t.DdM(12,go)),t.xp6(4),t.Q6J("routerLink",t.DdM(13,mo)),t.xp6(6),t.Q6J("formGroup",o.createventeproducForm),t.xp6(1),t.Q6J("disabled",o.buttonloading),t.xp6(1),t.Q6J("ngIf",!o.buttonloading),t.xp6(1),t.Q6J("ngIf",o.buttonloading),t.xp6(22),t.Q6J("ngForOf",o.countries),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.countryId.errors),t.xp6(11),t.Q6J("ngIf",o.submitted&&o.f.name.errors),t.xp6(10),t.Q6J("ngIf",o.submitted&&o.f.quantity.errors),t.xp6(9),t.s9C("max",o.max),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.quantity.errors))},dependencies:[u.sg,u.O5,g.rH,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.qQ,r.Fd,r.sg,r.u],encapsulation:2}),i})()}];let _o=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.Bz.forChild(ho),g.Bz]}),i})();var bo=m(1744);function N(i){return new bo.w(i,"./assets/i18n/",".json")}let vo=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[T.ZQ.forRoot(),u.ez,g.Bz,r.UX,r.u5,A.T.forRoot(),c.aw.forRoot({defaultLanguage:"en",loader:{provide:c.Zw,useFactory:N,deps:[v.eN]}}),_o]}),i})()}}]);